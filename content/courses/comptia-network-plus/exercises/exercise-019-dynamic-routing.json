{
  "id": "exercise-019-dynamic-routing",
  "lessonId": "lesson-019-dynamic-routing",
  "title": "Dynamic Routing Protocols: RIP, OSPF, and EIGRP Configuration and Comparison",
  "description": "You are a network technician evaluating and implementing dynamic routing protocols for your organization. Complete realistic scenarios involving configuring RIP, OSPF, and EIGRP; understanding protocol differences; making protocol selection decisions; and troubleshooting dynamic routing problems in multi-site enterprise networks.",
  "difficulty": "advanced",
  "points": 100,
  "language": "cisco-ios",
  "starterCode": "# ============================================================================\n# NETWORK TOPOLOGY CONTEXT - MULTI-PROTOCOL EVALUATION\n# ============================================================================\n# Your company operates four regional offices with WAN connections.\n# Currently using static routes, but growing rapidly.\n# Senior management: \"Evaluate which dynamic routing protocol to standardize on.\"\n#\n#              HQ Router (R1)                 East Office (R3)\n#         192.168.1.0/24                  192.168.30.0/24\n#         |                                |                    \n#    GigE0/1 ---10.0.12.0/30---GigE0/0-- R2 Core ---10.0.23.0/30--- GigE0/0\n#         |                    (Branch)  GigE0/1              GigE0/1\n#         |                                |                    |  \n#    GigE0/2---10.0.13.0/30----GigE0/0-- R4 West           10.0.24.0/30\n#                          (Branch)    192.168.40.0/24        |\n#                                    GigE0/1 ---- R5 South (192.168.50.0/24)\n#                                   10.0.45.0/30\n#\n# Router Details:\n# - R1 (HQ Backbone): Multiple internal networks\n# - R2 (Core/Branch): Hub-like position\n# - R3 (East): 1 connection to R2\n# - R4 (West): 1 connection to R2  \n# - R5 (South): 1 connection to R2\n#\n# Current Implementation: Static routes everywhere\n# Problem: Manual route management as network grows\n# Goal: Implement dynamic routing at scale\n# ============================================================================\n\n# ============================================================================\n# SCENARIO 1: PROTOCOL SELECTION - UNDERSTAND THE PROTOCOLS\n# ============================================================================\n# Your boss asks: \"Which dynamic routing protocol should we implement?\"\n# Three options available: RIP, OSPF, EIGRP\n#\n# TASK 1.1: Explain what each protocol is\n# \n# RIP (Routing Information Protocol):\n# Type: __________-Vector\n# Metric: __________ (count hops)\n# Max hops: __________\n# Use case: __________\n#\n# OSPF (Open Shortest Path First):\n# Type: __________-State\n# Metric: __________ (based on bandwidth)\n# Max hops: __________\n# Use case: __________\n#\n# EIGRP (Enhanced Interior Gateway Routing Protocol):\n# Type: __________\n# Metric: __________ (bandwidth + delay)\n# Max hops: __________\n# Vendor: __________\n# Use case: __________\n#\n# TASK 1.2: Which protocol is OLDEST and rarely used in production?\n# Protocol: __________\n# Why is it outdated?\n#\n\n# ============================================================================\n# SCENARIO 2: ADMINISTRATIVE DISTANCE (ROUTE TRUSTWORTHINESS)\n# ============================================================================\n# Your network will have multiple routing sources.\n# If two protocols learn route to same destination, which one wins?\n# Administrative Distance (AD) determines trustworthiness.\n#\n# TASK 2.1: Fill in default AD values\n# Connected route: AD = ___\n# Static route: AD = ___\n# EIGRP: AD = ___\n# OSPF: AD = ___\n# RIP: AD = ___\n#\n# TASK 2.2: Priority scenario\n# Your router has learned route to 10.0.0.0/8 from THREE sources:\n# - RIP learned: 10.0.0.0/8 via 10.1.1.1 (metric 5)\n# - OSPF learned: 10.0.0.0/8 via 10.2.2.2 (metric 100)\n# - EIGRP learned: 10.0.0.0/8 via 10.3.3.3 (metric 50)\n#\n# Which path does the router use?\n# Your answer: __________ \n# Why? (AD not metric determines winner)\n#\n\n# ============================================================================\n# SCENARIO 3: PROTOCOL COMPARISON AND SELECTION\n# ============================================================================\n# Evaluate RIP, OSPF, EIGRP against your network requirements:\n#\n# Requirement 1: Network has 5 offices with 1-2 WAN connections each\n# Expected to grow to 15 offices in 2 years\n# - RIP suitable? ___  Why?\n# - OSPF suitable? ___ Why?\n# - EIGRP suitable? ___ Why?\n#\n# Requirement 2: Must support multi-vendor equipment\n# (Cisco, Juniper, Arista routers in use)\n# - RIP suitable? ___ (All support)\n# - OSPF suitable? ___ (All support)\n# - EIGRP suitable? ___ (Cisco-proprietary)\n#\n# Requirement 3: Convergence must be < 5 seconds after link failure\n# - RIP typical convergence: __________ seconds (TOO SLOW)\n# - OSPF typical convergence: __________ seconds (GOOD)\n# - EIGRP typical convergence: __________ seconds (FAST)\n#\n# TASK 3.1: Make a recommendation\n# Best protocol for your network: __________\n# Second best: __________\n# Why rank them this way?\n#\n\n# ============================================================================\n# SCENARIO 4: OSPF MULTI-AREA DESIGN\n# ============================================================================\n# You chose OSPF. Design the area structure.\n# Currently have 5 routers. In 2 years: 15 routers expected.\n#\n# TASK 4.1: Propose area design\n# Area 0 (Backbone): Which routers?\n# Area 1 (East region): Which routers?\n# Area 2 (West region): Which routers?\n# Area 3 (South region): Which routers?\n#\n# TASK 4.2: Why use multi-area design vs single area?\n# Your explanation:\n#\n\n# ============================================================================\n# SCENARIO 5: CONVERGENCE AND FAILURE SCENARIOS\n# ============================================================================\n# Compare protocol behavior when network link fails.\n# WAN link between R2 and R3 (East office) goes down.\n#\n# TASK 5.1: RIP convergence after failure\n# Timeline:\n# - t=0 sec: Link down, routers detect failure\n# - t=0-30 sec: __________ (what happens?)\n# - t=30 sec: __________ (what happens?)\n# - t=60 sec: __________ (what happens?)\n# Total time to converge: __________ seconds\n#\n# TASK 5.2: OSPF convergence after failure\n# Timeline:\n# - t=0 sec: Link down, interface detects failure\n# - t=0-1 sec: __________ (what happens?)\n# - t=1-3 sec: __________ (what happens?)\n# Total time to converge: __________ seconds\n#\n# TASK 5.3: EIGRP convergence after failure\n# Timeline:\n# - t=0 sec: Link down\n# - t=0-1 sec: __________ (what happens?)\n# Total time to converge: __________ seconds\n#\n# TASK 5.4: Impact on users during failure\n# If link fails at t=0, when can users reach East office?\n# RIP: __________ seconds of downtime\n# OSPF: __________ seconds of downtime\n# EIGRP: __________ seconds of downtime\n#\n\n# ============================================================================\n# SCENARIO 6: CONFIGURATION CONCEPTS\n# ============================================================================\n# Understanding what commands do:\n#\n# TASK 6.1: RIP configuration\n# Command: router rip\n#          version 2\n#          network 10.0.0.0\n#\n# What does each line do?\n# router rip: __________\n# version 2: __________\n# network 10.0.0.0: __________\n#\n# TASK 6.2: OSPF configuration\n# Command: router ospf 1\n#          router-id 1.1.1.1\n#          network 10.0.12.0 0.0.0.3 area 0\n#\n# What does each line do?\n# router ospf 1: __________\n# router-id: __________\n# network statement with area: __________\n#\n# TASK 6.3: EIGRP configuration\n# Command: router eigrp 100\n#          router-id 1.1.1.1\n#          network 10.0.12.0 0.0.0.3\n#\n# What does each line do?\n# router eigrp 100: __________\n# network statement: __________\n#\n\n# ============================================================================\n# SCENARIO 7: METRIC COMPARISON\n# ============================================================================\n# How does each protocol choose best path?\n#\n# TASK 7.1: RIP metric (hop count)\n# Path A to 10.0.0.0/8: 3 hops (through 3 routers)\n# Path B to 10.0.0.0/8: 2 hops (through 2 routers)\n# RIP chooses: __________ (Path with lowest hops)\n#\n# Problem: Two 1-Gbps links = same cost as two 56-Kbps links!\n# This is why RIP is poor for heterogeneous networks\n#\n# TASK 7.2: OSPF metric (cost)\n# Formula: Cost = Reference Bandwidth / Interface Bandwidth\n# Reference bandwidth: 100 Mbps (default)\n#\n# Path A: 100 Mbps link + 100 Mbps link + 1 Gbps link = Cost ____ + ____ + ____ = ____\n# Path B: 10 Gbps link + 10 Gbps link = Cost ____ + ____ = ____\n#\n# OSPF chooses: __________ (path with lower cost)\n# Why is this better than RIP?\n#\n# TASK 7.3: EIGRP metric\n# Formula: Metric = (Bandwidth + Delay) * 256\n# More complex than OSPF, but same idea: faster links preferred\n#\n# EIGRP vs OSPF: Which converges faster? __________\n# Why?\n#\n\n# ============================================================================\n# SCENARIO 8: PROTOCOL LIMITS AND SCALING\n# ============================================================================\n#\n# TASK 8.1: RIP maximum network size\n# RIP max hops: 15\n# What happens if network requires > 15 hops?\n# Your answer:\n#\n# Example: Company has 20 branch offices in chain:\n# HQ → Branch1 → Branch2 → ... → Branch20\n# How many hops to reach Branch20?\n# Can RIP handle this? __________ Why?\n#\n# TASK 8.2: OSPF and EIGRP scaling\n# What is the practical limit for each?\n# OSPF: __________ routers (with multi-area design)\n# EIGRP: __________ routers (within AS)\n#\n# TASK 8.3: Update efficiency\n# RIP sends: __________ (every 30 sec)\n# OSPF sends: __________ (only when topology changes)\n# EIGRP sends: __________ (only when topology changes)\n#\n# Why is this important for WAN links with limited bandwidth?\n#\n\n# ============================================================================\n# SCENARIO 9: TROUBLESHOOTING DYNAMIC ROUTING\n# ============================================================================\n#\n# TASK 9.1: Neighbors not forming\n# After configuring OSPF, routers don't become neighbors.\n# List 5 potential causes:\n# 1. __________\n# 2. __________\n# 3. __________\n# 4. __________\n# 5. __________\n#\n# TASK 9.2: Routes not appearing\n# OSPF is configured and neighbors are forming.\n# But expected routes don't appear in routing table.\n# Why might this happen? (List 3 causes)\n# 1. __________\n# 2. __________\n# 3. __________\n#\n# TASK 9.3: Verification commands\n# OSPF neighbor verification:\n# Command: __________\n# Expected output shows: Neighbors in FULL state\n#\n# OSPF route verification:\n# Command: __________\n# Expected output shows: Routes marked with 'O' or 'O IA'\n#\n# OSPF database verification:\n# Command: __________\n# Shows: All routers have identical LSA database\n#\n\n# ============================================================================\n# SCENARIO 10: HYBRID APPROACH\n# ============================================================================\n# Your company decides: Use OSPF for main network, RIP for legacy branch.\n#\n# TASK 10.1: Possible or problematic?\n# Can OSPF and RIP coexist? __________\n# How would they interact?\n#\n# TASK 10.2: If AD=110 (OSPF) vs AD=120 (RIP) learned same route\n# Which route used? __________ Why?\n#\n# TASK 10.3: Protocol migration strategy\n# You're replacing RIP with OSPF in 5 branches over 3 months.\n# How would you migrate without outage?\n# Strategy:\n#\n",
  "solution": "# ============================================================================\n# SCENARIO 1: PROTOCOL SELECTION UNDERSTANDING (SOLUTIONS)\n# ============================================================================\n\n# TASK 1.1: Explain each protocol\n#\n# RIP (Routing Information Protocol):\n# Type: Distance-Vector\n# Metric: Hop Count (count hops)\n# Max hops: 15\n# Use case: Small networks (outdated, not recommended for new deployments)\n#\n# OSPF (Open Shortest Path First):\n# Type: Link-State\n# Metric: Cost (based on bandwidth)\n# Max hops: Unlimited (can design for thousands of routers)\n# Use case: Large enterprise networks, multi-vendor environments\n#\n# EIGRP (Enhanced Interior Gateway Routing Protocol):\n# Type: Hybrid (Advanced Distance Vector)\n# Metric: Bandwidth + Delay\n# Max hops: 255 (default AD=90)\n# Vendor: Cisco proprietary (though RFC 7868 published)\n# Use case: All-Cisco networks needing fastest convergence\n#\n# TASK 1.2: Oldest protocol rarely used\n# Protocol: RIP\n# Why outdated:\n# - Maximum 15 hops = very limited network size\n# - Metric (hop count) ignores link speed\n#   (56-Kbps link = 1 hop, same as 1-Gbps link!)\n# - Slow convergence (5-10 minutes after failure)\n# - Uses 25% of WAN bandwidth just sending routing tables every 30 sec\n# - No multi-area design (flat networks only)\n# - Only suitable for small lab networks or legacy systems\n# - Replaced by OSPF (1990s) and EIGRP (late 1980s)\n#\n\n# ============================================================================\n# SCENARIO 2: ADMINISTRATIVE DISTANCE (SOLUTIONS)\n# ============================================================================\n\n# TASK 2.1: Default AD values\n# Connected route: AD = 0 (most trusted - directly connected)\n# Static route: AD = 1 (manually configured, very trustworthy)\n# EIGRP: AD = 90 (internal EIGRP)\n# OSPF: AD = 110 (open standard)\n# RIP: AD = 120 (least trusted of these)\n#\n# MEMORY: Lower AD = more trusted\n# Connected < Static < EIGRP < OSPF < RIP\n# 0 < 1 < 90 < 110 < 120\n#\n# TASK 2.2: Priority scenario\n# Your router learns route to 10.0.0.0/8 from three sources:\n# - RIP learned: AD=120, metric=5\n# - OSPF learned: AD=110, metric=100\n# - EIGRP learned: AD=90, metric=50\n#\n# Router uses: EIGRP via 10.3.3.3\n#\n# Why: Administrative Distance ALWAYS determines winner (regardless of metric)\n# AD 90 (EIGRP) < AD 110 (OSPF) < AD 120 (RIP)\n# Metric (5, 100, 50) doesn't matter when comparing different protocols\n# Metric only matters when comparing routes from SAME protocol\n#\n# If both EIGRP routes existed:\n# - EIGRP path 1: metric 50 (lower wins)\n# - EIGRP path 2: metric 80\n# Then compare metrics (50 < 80, so path 1 wins)\n#\n\n# ============================================================================\n# SCENARIO 3: PROTOCOL COMPARISON AND SELECTION (SOLUTIONS)\n# ============================================================================\n\n# TASK 3.1: Requirements evaluation\n#\n# Requirement 1: 5 offices growing to 15 in 2 years (1-2 WAN per office)\n# - RIP suitable? NO\n#   Why: Max 15 hops = networking ceiling\n#   At 15 offices in chain: 15 hops = unreachable\n#   Even with better topology, scaling difficult\n#\n# - OSPF suitable? YES\n#   Why: Multi-area design supports thousands of routers\n#   Scales linearly, not limited by hop count\n#\n# - EIGRP suitable? YES\n#   Why: Max 255 hops default, very efficient updates\n#   But limited to Cisco (constraint you didn't specify)\n#\n# Requirement 2: Multi-vendor equipment support\n# - RIP suitable? YES (ancient protocol, all vendors support)\n#   But DON'T USE RIP for performance reasons\n#\n# - OSPF suitable? YES (open standard RFC 2328)\n#   All vendors: Cisco, Juniper, Arista, etc.\n#   BEST CHOICE for heterogeneous networks\n#\n# - EIGRP suitable? NO (Cisco proprietary)\n#   Juniper has some support, but not native\n#   Arista not supported\n#   Limits flexibility, locks you to Cisco\n#\n# Requirement 3: Convergence < 5 seconds\n# - RIP typical convergence: 5-10 MINUTES (way too slow)\n#   Why: Wait for 30-sec updates, holddowns, timers\n#\n# - OSPF typical convergence: 1-3 SECONDS (good)\n#   Why: SPF recalculation is fast, multi-area reduces scope\n#\n# - EIGRP typical convergence: < 1 SECOND (excellent)\n#   Why: DUAL algorithm finds alternates immediately\n#\n# TASK 3.2: Recommendation\n# Best protocol: OSPF\n# Second best: EIGRP (if all-Cisco)\n#\n# Why rank this way:\n# OSPF wins because:\n# 1. Multi-vendor support (Juniper/Arista)\n# 2. Proven enterprise standard\n# 3. Fast convergence (1-3 sec meets requirement)\n# 4. Scales to 15+ offices easily\n# 5. Extensive documentation and support\n# 6. No vendor lock-in\n#\n# EIGRP would be #2 IF your network was 100% Cisco\n# (Faster convergence, simpler multi-area)\n# But multi-vendor requirement makes OSPF mandatory\n#\n\n# ============================================================================\n# SCENARIO 4: OSPF MULTI-AREA DESIGN (SOLUTIONS)\n# ============================================================================\n\n# TASK 4.1: Propose area design\n# Area 0 (Backbone): R1 (HQ) and R2 (Core)\n#   Purpose: Backbone area interconnects all regions\n#   Routers: Must include ABRs (Area Border Routers)\n#   R2 is natural ABR (touches all regions)\n#\n# Area 1 (East region): R2 (ABR), R3 (East office)\n#   Purpose: Contains East branch and its networks\n#   R2 connects Area 1 to backbone\n#\n# Area 2 (West region): R2 (ABR), R4 (West office)  \n#   Purpose: Contains West branch and its networks\n#   R2 connects Area 2 to backbone\n#\n# Area 3 (South region): R2 (ABR), R5 (South office)\n#   Purpose: Contains South branch and its networks\n#   R2 connects Area 3 to backbone\n#\n# Note: R1 and R2 both have interfaces in Area 0 (backbone requirement)\n#\n# TASK 4.2: Why multi-area vs single area\n# ANSWER:\n# Multi-area design provides:\n#\n# 1. Reduced flooding scope\n#    - Link failure in East (Area 1) floods only Area 1 + Area 0\n#    - Doesn't flood to West (Area 2) and South (Area 3)\n#    - West and South unaffected by East problems\n#\n# 2. Faster convergence\n#    - Single area: All 15 routers recalculate SPF when any link fails\n#    - Multi-area: Only affected area recalculates\n#    - At 15 routers: 2-5x faster convergence with multi-area\n#\n# 3. Smaller routing tables\n#    - Each area router maintains full database for its area\n#    - Other areas shown as summaries (1 route per summarized area)\n#    - East router doesn't need to know about every West router\n#\n# 4. Scalability\n#    - Single area practical limit: ~50-100 routers\n#    - Multi-area can support 1000s of routers\n#    - Your 15 routers today might grow to 50+ tomorrow\n#\n# 5. Design flexibility\n#    - Can implement different policies per area\n#    - Stub areas for branches (reduces routing table)\n#    - Summary routes between areas\n#\n# SCALING EXAMPLE:\n# - 5 routers (current): Single area sufficient\n# - 15 routers (2 years): Multi-area recommended\n# - 50 routers (5 years): Multi-area essential\n#\n\n# ============================================================================\n# SCENARIO 5: CONVERGENCE AND FAILURE SCENARIOS (SOLUTIONS)\n# ============================================================================\n\n# TASK 5.1: RIP convergence timeline\n# Timeline after link R2-R3 goes down:\n# - t=0 sec: Link down, routers detect failure\n#   R2 detects GigE0/1 is down (interface goes down/down)\n#\n# - t=0-30 sec: Wait for next periodic update\n#   R2 will send next update at t=30 (next 30-sec interval)\n#   R3 still thinks R2 reachable (no update yet)\n#\n# - t=30 sec: First convergence update\n#   R2 sends RIP update marking route via R3 as metric 16 (unreachable/poison)\n#   Other routers receive poison, mark for holddown\n#\n# - t=30-210 sec: Holddown period (180 seconds)\n#   Routers ignore any new routes to that network\n#   Even if better path appears, must wait\n#\n# - t=210+ sec: Route flushed from table (at 240 sec flush timer)\n#   After this point, routes to East office available again\n#\n# Total time to converge: 240+ SECONDS (4+ MINUTES)\n#\n# User impact: Cannot reach East office for 4+ minutes!\n#\n# TASK 5.2: OSPF convergence timeline\n# Timeline after link R2-R3 goes down:\n# - t=0 sec: Link down, interface detects failure\n#   Router immediately knows topology changed\n#\n# - t=0-1 sec: Flood LSA updates\n#   R2 generates new LSA (R3 no longer in database)\n#   Floods throughout Area (Area 1 + Area 0)\n#\n# - t=1-3 sec: SPF recalculation\n#   Each router calculates new best paths\n#   Old path via R3 now unreachable\n#   Alternate paths (if exist) installed\n#\n# Total time to converge: 1-3 SECONDS\n#\n# User impact: Connectivity restored in 1-3 seconds\n# Much better than RIP!\n#\n# TASK 5.3: EIGRP convergence timeline\n# Timeline after link R2-R3 goes down:\n# - t=0 sec: Link down\n#   R2 and R3 detect interface failure\n#\n# - t=0-1 sec: Query neighboring routers\n#   R2 asks neighbors: \"Do you have alternate path to R3's networks?\"\n#   DUAL algorithm searches for loop-free alternates\n#   If alternate path exists, activates immediately\n#   If no alternate, routes go unreachable\n#\n# Total time to converge: < 1 SECOND (typically 100-200 ms)\n#\n# User impact: Negligible - routes restored almost instantly\n#\n# TASK 5.4: Downtime comparison\n# If link fails at t=0, when can users reach East office?\n# RIP: 240+ SECONDS downtime (4+ minutes)\n# OSPF: 1-3 SECONDS downtime\n# EIGRP: < 1 SECOND downtime\n#\n# Business impact example:\n# - RIP: 4-minute outage affects 1000+ users on East office\n# - OSPF: 2-second blip (users notice lag but no calls)\n# - EIGRP: Imperceptible (no user impact)\n#\n# This is why OSPF/EIGRP mandatory for production networks\n#\n\n# ============================================================================\n# SCENARIO 6: CONFIGURATION CONCEPTS (SOLUTIONS)\n# ============================================================================\n\n# TASK 6.1: RIP configuration explanation\n# Command: router rip\n#          version 2\n#          network 10.0.0.0\n#\n# router rip: Enables RIP routing protocol (process begins)\n#            Creates RIP routing context\n#\n# version 2: Specifies RIPv2 (not old RIPv1)\n#           RIPv2 includes subnet masks, multicast updates\n#           RIPv1 is classful, deprecated\n#\n# network 10.0.0.0: Find interfaces in 10.0.0.0/8 network\n#                   Activate RIP on those interfaces\n#                   Send/receive RIP updates on those interfaces\n#                   Advertise these networks in RIP updates\n#                   Note: Uses classful networks\n#\n# TASK 6.2: OSPF configuration explanation\n# Command: router ospf 1\n#          router-id 1.1.1.1\n#          network 10.0.12.0 0.0.0.3 area 0\n#\n# router ospf 1: Enable OSPF process 1 (process number = local significance)\n#               Multiple OSPF processes can run (usually just 1)\n#\n# router-id 1.1.1.1: Set unique identifier for this router\n#                   Must be unique within OSPF domain\n#                   Used to identify this router in LSAs\n#                   Best practice: Set manually to stable IP\n#\n# network 10.0.12.0 0.0.0.3 area 0: Find interfaces matching this network\n#                   Wildcard mask (0.0.0.3) defines range\n#                   0.0.0.3 = /30 network (4 addresses)\n#                   Activate OSPF on matching interfaces\n#                   Place them in Area 0 (backbone)\n#\n# TASK 6.3: EIGRP configuration explanation\n# Command: router eigrp 100\n#          router-id 1.1.1.1\n#          network 10.0.12.0 0.0.0.3\n#\n# router eigrp 100: Enable EIGRP Autonomous System 100\n#                  100 = AS number (must match on all EIGRP routers)\n#                  Routers with different AS numbers don't peer\n#\n# router-id 1.1.1.1: Set unique identifier for this router\n#                   Similar to OSPF router-id\n#                   Identifies router in EIGRP hello packets\n#\n# network 10.0.12.0 0.0.0.3: Find interfaces matching this network\n#                   Activate EIGRP on matching interfaces\n#                   No area concept like OSPF\n#                   Everything in same AS is same \"area\"\n#\n\n# ============================================================================\n# SCENARIO 7: METRIC COMPARISON (SOLUTIONS)\n# ============================================================================\n\n# TASK 7.1: RIP metric (hop count)\n# Path A: 3 hops\n# Path B: 2 hops\n# RIP chooses: Path B (2 hops < 3 hops)\n#\n# Problem illustration:\n# Path A: Corporate HQ --[56Kbps]-- Branch --[56Kbps]-- Remote (total: 60 Kbps effective)\n#         Metric: 2 hops\n#\n# Path B: Corporate HQ --[1Gbps]-- Internet Cloud --[1Gbps]-- Remote (total: 1 Gbps effective)\n#         Metric: 2 hops also!\n#\n# RIP sees same metric but Path A is vastly slower in reality\n# This is why RIP is inappropriate for networks with mixed link speeds\n#\n# TASK 7.2: OSPF metric (cost)\n# Formula: Cost = Reference Bandwidth (100 Mbps) / Interface Bandwidth\n#\n# Path A: 100 Mbps + 100 Mbps + 1 Gbps\n# - 100 Mbps: 100/100 = 1\n# - 100 Mbps: 100/100 = 1\n# - 1 Gbps: 100/1000 = 0.1 ≈ 1\n# Total: 1 + 1 + 1 = 3\n#\n# Path B: 10 Gbps + 10 Gbps\n# - 10 Gbps: 100/10000 = 0.01 ≈ 1\n# - 10 Gbps: 100/10000 = 0.01 ≈ 1\n# Total: 1 + 1 = 2\n#\n# OSPF chooses: Path B (cost 2 < cost 3)\n#\n# Why better than RIP:\n# - OSPF considers link speed\n# - Faster paths preferred\n# - More realistic path selection\n# - Better for heterogeneous networks\n#\n# Note: OSPF default reference bandwidth 100 Mbps means:\n# - 100 Mbps link = cost 1\n# - 1 Gbps link = cost 1 (too close!)\n# - Fix: Change reference bandwidth to 10000 (10 Gbps) if network uses modern speeds\n#\n# TASK 7.3: EIGRP vs OSPF convergence\n# EIGRP faster convergence\n#\n# Why:\n# - OSPF: Must recalculate all paths using SPF algorithm (CPU intensive)\n# - EIGRP: DUAL algorithm finds pre-computed alternates immediately\n#         Doesn't need to recalculate from scratch\n# - Result: EIGRP converges 10-100x faster\n#\n# Trade-off: EIGRP more complex to understand/troubleshoot\n# OSPF simpler conceptually (complete topology database)\n#\n\n# ============================================================================\n# SCENARIO 8: PROTOCOL LIMITS AND SCALING (SOLUTIONS)\n# ============================================================================\n\n# TASK 8.1: RIP maximum network size\n# RIP max hops: 15 (16 = infinity/unreachable)\n#\n# What happens if > 15 hops required?\n# Network becomes unreachable!\n# Any path longer than 15 hops = 16 = poison\n# Packets dropped\n#\n# Example chain:\n# HQ → B1 → B2 → ... → B20\n# Hops to reach B20: 20 hops\n# RIP metric for B20: 16 (unreachable)\n# Status: Cannot reach B20\n#\n# Can RIP handle this? NO\n# RIP unsuitable for networks with > 15 hop depth\n# This is fundamental architectural limit\n#\n# TASK 8.2: OSPF and EIGRP scaling\n# OSPF: 1000+ routers practical limit (with multi-area design)\n# EIGRP: 500+ routers practical limit (single AS)\n#\n# Why OSPF > EIGRP?\n# - OSPF multi-area design isolates topology\n# - Each area limits SPF calculation size\n# - Proven at 5000+ router scale (ISPs use it)\n#\n# EIGRP limits:\n# - Single flat AS only\n# - No area hierarchy\n# - Entire database sent to all routers\n# - Memory/CPU constraints at large scale\n#\n# TASK 8.3: Update efficiency\n# RIP sends: COMPLETE ROUTING TABLE (every 30 seconds)\n# - Every 30 sec: Full table flooded\n# - Size: 25 routers * 30 routes = 750 routes flooded every 30 sec\n# - WAN impact: Continuous stream of updates consuming bandwidth\n#\n# OSPF sends: TRIGGERED UPDATES ONLY (when topology changes)\n# - Only when: Link up/down, router join/leave\n# - Update contains: Only the changed LSA\n# - WAN impact: Minimal after convergence\n#\n# EIGRP sends: TRIGGERED UPDATES ONLY (when topology changes)\n# - Only affected routes updated\n# - Efficient delta encoding\n# - WAN impact: Very minimal\n#\n# Why important for WAN:\n# - Limited WAN bandwidth (maybe 10 Mbps)\n# - RIP wastes 10% of bandwidth just sending routing tables\n# - OSPF/EIGRP send updates only when needed\n# - More bandwidth for actual user traffic\n#\n\n# ============================================================================\n# SCENARIO 9: TROUBLESHOOTING DYNAMIC ROUTING (SOLUTIONS)\n# ============================================================================\n\n# TASK 9.1: OSPF neighbors not forming (5 causes)\n# 1. Mismatched OSPF areas\n#    - Router A configured interface in Area 0\n#    - Router B configured interface in Area 1\n#    - OSPF only neighbors same area on given link\n#    - Solution: Configure same area\n#\n# 2. Mismatched hello/dead timers\n#    - Router A: hello 10, dead 40 (default)\n#    - Router B: hello 30, dead 120 (customized)\n#    - Timers must match on link\n#    - Solution: Configure matching timers or use defaults\n#\n# 3. Authentication mismatch\n#    - Router A: no authentication\n#    - Router B: authentication password enabled\n#    - OSPF packets dropped if auth mismatch\n#    - Solution: Configure same authentication\n#\n# 4. Interface not in OSPF network statement\n#    - Router A configured network including interface\n#    - Router B didn't include interface in network statement\n#    - OSPF not activated on router B interface\n#    - Solution: Add network statement or enable on interface\n#\n# 5. MTU (Maximum Transmission Unit) mismatch\n#    - Router A: MTU 1500\n#    - Router B: MTU 1200\n#    - OSPF packets fragmented\n#    - Solution: Configure matching MTU\n#\n# TASK 9.2: Routes not appearing (3 causes)\n# 1. Networks not advertised\n#    - OSPF running but networks not in network statements\n#    - Routers only advertise networks matching network statements\n#    - If internal network not matched, not advertised\n#    - Solution: Add network statement for all networks\n#\n# 2. Routes filtered or summarized\n#    - Routes exist but filtered by distribute-list\n#    - Routes summarized (multiple /24 as one /22)\n#    - Routes distributed from another protocol\n#    - Solution: Check filters and route summarization\n#\n# 3. Database not converged\n#    - Routers still building LSDB\n#    - SPF calculation not complete\n#    - Wait 10-30 seconds for convergence\n#    - Solution: Verify OSPF database converged\n#\n# TASK 9.3: Verification commands\n# OSPF neighbor verification:\n# Command: show ip ospf neighbor\n# or:      show ip ospf neighbor brief\n# Expected: Neighbors listed with state FULL (or FULL/DR, FULL/BDR)\n#\n# OSPF route verification:\n# Command: show ip route ospf\n# or:      show ip route | include O\n# Expected: Routes marked O (internal) or O IA (inter-area)\n#           Format: O 10.0.0.0/8 [110/100] via 10.0.12.2\n#\n# OSPF database verification:\n# Command: show ip ospf database\n# or:      show ip ospf database summary\n# Expected: All routers in area have matching LSA database\n#           Same sequence numbers for same LSAs\n#           If different = problem\n#\n\n# ============================================================================\n# SCENARIO 10: HYBRID APPROACH (SOLUTIONS)\n# ============================================================================\n\n# TASK 10.1: Can OSPF and RIP coexist?\n# Yes, they CAN coexist using route redistribution\n# \n# Setup:\n# - New branches: Running OSPF\n# - Legacy branch: Still running RIP\n# - Transition router: Runs both OSPF and RIP\n#\n# Configuration:\n# router ospf 1\n#  redistribute rip\n# router rip\n#  version 2\n#  redistribute ospf 1\n#\n# Result:\n# - OSPF routers learn RIP routes (via redistribution)\n# - RIP routers learn OSPF routes (via redistribution)\n# - Coexistence possible during migration\n#\n# TASK 10.2: If same route learned from OSPF and RIP\n# Destination: 10.0.0.0/8\n# - OSPF learned: AD=110\n# - RIP learned: AD=120\n#\n# Router uses: OSPF (110 < 120)\n#\n# Why OSPF wins:\n# Administrative Distance determines trustworthiness\n# OSPF (110) is more trusted than RIP (120)\n# Even if RIP advertises same route first\n# OSPF route used when installed in table\n#\n# TASK 10.3: Protocol migration strategy\n# Migrate 5 branches from RIP to OSPF over 3 months\n#\n# Strategy (rolling migration):\n# Month 1: Migrate 2 branches\n# - Configure OSPF on Branch 1 and Branch 2\n# - Keep RIP active on Branches 3,4,5\n# - Transition router runs both protocols\n# - Verify routes reachable before next migration\n# - Rollback plan: Revert OSPF to RIP if problems\n#\n# Month 2: Migrate 2 more branches\n# - Add Branch 3 and Branch 4 to OSPF\n# - Branch 5 still on RIP\n# - Verify convergence and performance\n#\n# Month 3: Migrate final branch\n# - Add Branch 5 to OSPF\n# - All branches now OSPF\n# - Remove RIP configuration\n# - Monitor for 1 week\n# - Complete migration\n#\n# Risk mitigation:\n# 1. Parallel operation (both protocols running)\n#    - If OSPF fails, RIP still works\n#    - No outage during migration\n#\n# 2. Verify after each phase\n#    - Test connectivity\n#    - Check convergence time\n#    - Monitor CPU/memory\n#\n# 3. Quick rollback\n#    - Keep RIP configuration saved\n#    - Can activate in 5 minutes if needed\n#\n# 4. Schedule during maintenance window\n#    - Monitor for 2-4 hours after each migration\n#    - User support on alert\n#\n# Benefits of this approach:\n# - Zero-downtime migration\n# - Can rollback if problems occur\n# - Gradual complexity increase (learn OSPF before full deployment)\n# - Existing applications continue running\n#\n",
  "hints": [
    "RIP: Distance Vector, metric=hops, max 15 hops, convergence 5-10 minutes - AVOID for production",
    "OSPF: Link-State, metric=cost, scales 1000+ routers, convergence 1-3 seconds - RECOMMENDED",
    "EIGRP: Hybrid, metric=bandwidth+delay, convergence <1 second - CISCO-ONLY but fastest",
    "Administrative Distance: Connected=0, Static=1, EIGRP=90, OSPF=110, RIP=120 - determines winner",
    "Lower AD = more trusted, AD compared first before comparing metrics",
    "Multi-area OSPF isolates failures and reduces convergence time vs single-area",
    "RIP updates every 30 sec (wastes WAN bandwidth), OSPF/EIGRP triggered updates only",
    "OSPF convergence 1-3 seconds typically, EIGRP <1 second, RIP 4-10 minutes",
    "For multi-vendor networks: OSPF is standard choice, EIGRP is Cisco-only",
    "Neighbors not forming: Check area, timers, authentication, network statements",
    "Routes not appearing: Check network statements, filters, LSDB convergence",
    "RIP hop count metric ignores link speed (56Kbps = same as 1Gbps), inappropriate for modern networks"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Understands three dynamic routing protocols and their characteristics",
      "validation": "assert ('rip' in code.lower() and 'ospf' in code.lower() and 'eigrp' in code.lower()) and ('distance' in code.lower() or 'link-state' in code.lower() or 'hybrid' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Knows administrative distance values (0, 1, 90, 110, 120)",
      "validation": "assert ('0' in code and '1' in code and '90' in code and '110' in code and '120' in code) or ('ad' in code.lower() and 'distance' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Explains protocol selection criteria: multi-vendor support, convergence, scalability",
      "validation": "assert ('ospf' in code.lower() and ('vendor' in code.lower() or 'convergence' in code.lower() or 'scalab' in code.lower())) or ('recommend' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Understands OSPF multi-area design for scalability and failure isolation",
      "validation": "assert ('area' in code.lower() and ('backbone' in code.lower() or 'flooding' in code.lower() or 'convergence' in code.lower())) or ('multi-area' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc5",
      "description": "Compares convergence times: RIP slow, OSPF fast, EIGRP fastest",
      "validation": "assert ('convergence' in code.lower() or 'rip' in code.lower() or 'ospf' in code.lower()) and ('second' in code.lower() or 'minute' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc6",
      "description": "Explains metric differences: RIP=hops, OSPF=cost/bandwidth, EIGRP=bandwidth+delay",
      "validation": "assert ('metric' in code.lower() or 'hop' in code.lower() or 'bandwidth' in code.lower()) and code.lower().count(('rip', 'ospf', 'eigrp')) >= 2",
      "isHidden": false
    },
    {
      "id": "tc7",
      "description": "Understands RIP limitations (15 hop max, slow convergence, ignores speed)",
      "validation": "assert ('rip' in code.lower() and ('15' in code or 'limit' in code.lower() or 'outdated' in code.lower())) or ('hop' in code.lower() and 'max' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc8",
      "description": "Explains troubleshooting: neighbor formation, route appearance, LSDB convergence",
      "validation": "assert ('neighbor' in code.lower() or 'troubleshoot' in code.lower()) and ('network' in code.lower() or 'statement' in code.lower() or 'area' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc9",
      "description": "Knows RIP sends full table every 30 sec, OSPF/EIGRP send triggered updates only",
      "validation": "assert ('30' in code or 'update' in code.lower()) and ('triggered' in code.lower() or 'full' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc10",
      "description": "Total file size meets 10,000+ character minimum",
      "validation": "assert len(code) >= 10000",
      "isHidden": true
    },
    {
      "id": "tc11",
      "description": "Covers major lesson 019 concepts: RIP/OSPF/EIGRP comparison, selection, configuration, troubleshooting",
      "validation": "assert code.count('task') >= 8 and ('scenario' in code.lower() or 'dynamic' in code.lower()) and code.count(('rip', 'ospf', 'eigrp')) >= 15",
      "isHidden": true
    }
  ]
}
