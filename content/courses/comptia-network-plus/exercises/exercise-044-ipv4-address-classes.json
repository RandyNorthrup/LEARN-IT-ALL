{
  "id": "exercise-044-ipv4-address-classes",
  "lessonId": "lesson-044-ipv4-address-classes",
  "title": "IPv4 Address Classes and CIDR Notation",
  "description": "Master IPv4 address classification, CIDR notation, and address space allocation. Calculate address ranges and understand class-based vs classless routing.",
  "difficulty": "beginner",
  "points": 100,
  "language": "text",
  "starterCode": "# IPv4 ADDRESS CLASSES EXERCISE\n# Understand address classification and CIDR\n\n## SCENARIO: ISP address allocation\n## - ISP: Backbone operator (Large organization)\n## - Customers: Different sizes (startups, enterprises, carriers)\n## - Challenge: Allocate addresses efficiently\n## - Tools: Classful vs Classless routing\n\n## PART 1: CLASSFUL ROUTING (LEGACY)\n## Q1: Why classful routing?\n##     Historical context:\n##     - 1980s: Early internet\n##     - Problem: Inefficient allocation (too much waste)\n##     - Solution: Divide address space into classes\n##     - Result: _______ (organizations get appropriate size)\n\n## Q2: Class A characteristics (OBSOLETE but understand):\n##     Range: 1.0.0.0 - 126.255.255.255\n##     Leading bit: _______ (0xxxxx...)\n##     Default mask: _______ (/8)\n##     Max networks: _______ (126)\n##     Hosts per network: _______ (16,777,214)\n##     Network size: _______ (HUGE)\n##     Allocation: _______ (countries, very large orgs)\n\n## Q3: Class B characteristics (OBSOLETE):\n##     Range: 128.0.0.0 - 191.255.255.255\n##     Leading bits: _______ (10xxxxxx...)\n##     Default mask: _______ (/16)\n##     Max networks: _______ (16,384)\n##     Hosts per network: _______ (65,534)\n##     Network size: _______ (VERY LARGE)\n##     Allocation: _______ (universities, large enterprises)\n\n## Q4: Class C characteristics (STILL COMMON):\n##     Range: 192.0.0.0 - 223.255.255.255\n##     Leading bits: _______ (110xxxxx...)\n##     Default mask: _______ (/24)\n##     Max networks: _______ (2,097,152)\n##     Hosts per network: _______ (254)\n##     Network size: _______ (SMALL)\n##     Allocation: _______ (small businesses, labs)\n\n## Q5: Class D and E:\n##     Class D: _______ (224.0.0.0 - 239.255.255.255)\n##     Purpose: _______ (multicast)\n##     Example use: _______ (video streaming, multimedia)\n##     \n##     Class E: _______ (240.0.0.0 - 255.255.255.255)\n##     Purpose: _______ (reserved for future use)\n##     Status: _______ (NOT ALLOCATED TO ANYONE)\n\n## PART 2: CLASSLESS ROUTING (CIDR)\n## Q6: CIDR notation:\n##     CIDR: Classless Inter-Domain Routing\n##     Format: _______ (IP/prefix_length)\n##     Example: 192.168.1.0/24\n##     \n##     Meaning:\n##     - 192.168.1.0 = Network address\n##     - /24 = Prefix length (24 bits = network)\n##     - Remaining: 32 - 24 = _______ (8 bits = host)\n##     \n##     Benefit: _______ (any prefix length, not just /8, /16, /24)\n\n## Q7: Common CIDR prefix lengths:\n##     /8: _______ (255.0.0.0, 16M hosts)\n##     /16: _______ (255.255.0.0, 64K hosts)\n##     /24: _______ (255.255.255.0, 254 hosts)\n##     /30: _______ (255.255.255.252, 2 hosts - router links)\n##     /32: _______ (255.255.255.255, 1 host - host route)\n\n## Q8: Converting between CIDR and masks:\n##     CIDR /25 = _______ (mask: 255.255.255.128)\n##     CIDR /26 = _______ (mask: 255.255.255.192)\n##     CIDR /27 = _______ (mask: 255.255.255.224)\n##     CIDR /28 = _______ (mask: 255.255.255.240)\n##     \n##     Pattern: Each /1 increment flips one more bit in mask\n\n## PART 3: ADDRESS ALLOCATION SCENARIOS\n## Q9: Allocating to enterprise (500 employees):\n##     Requirement: _______ (>500 IPs, for growth)\n##     Minimum: _______ (/23, 510 hosts)\n##     Options:\n##     - /23 (510 hosts): Efficient, fits now\n##     - /22 (1,022 hosts): More room for growth\n##     - Recommendation: _______ (/22 preferred)\n##     \n##     Example allocation: 10.0.0.0/22\n\n## Q10: Allocating to small startup (30 employees):\n##      Requirement: _______ (>30 IPs)\n##      Minimum: _______ (/26, 62 hosts)\n##      Options:\n##      - /26 (62 hosts): Efficient\n##      - /25 (126 hosts): Wasteful but simple\n##      - Recommendation: _______ (/26 preferred)\n##      \n##      Example allocation: 192.168.100.0/26\n\n## Q11: Allocating to branch office (10 employees):\n##      Requirement: _______ (>10 IPs)\n##      Minimum: _______ (/28, 14 hosts)\n##      Options:\n##      - /28 (14 hosts): Efficient for small site\n##      - /26 (62 hosts): Wasteful\n##      - Recommendation: _______ (/28)\n##      \n##      Example allocation: 10.1.1.0/28\n\n## Q12: Allocating to router-to-router link:\n##      Requirement: _______ (2 IPs only)\n##      Allocation: _______ (/30)\n##      Hosts: 2 (router A, router B)\n##      \n##      Example: 10.1.1.0/30\n##      - 10.1.1.0: Network\n##      - 10.1.1.1: Router A\n##      - 10.1.1.2: Router B\n##      - 10.1.1.3: Broadcast\n\n## PART 4: ADDRESS SPACE HIERARCHY\n## Q13: RIR (Regional Internet Registries):\n##      Organizations:\n##      - ARIN: _______ (North America)\n##      - RIPE NCC: _______ (Europe, Middle East)\n##      - APNIC: _______ (Asia-Pacific)\n##      - LACNIC: _______ (Latin America)\n##      - AFNIC: _______ (Africa)\n##      \n##      Allocation:\n##      - RIR receives large blocks from IANA\n##      - RIR allocates to ISPs and orgs\n##      - ISP allocates to customers\n\n## Q14: Address exhaustion issue:\n##      Problem: _______ (IPv4 addresses running out)\n##      When: _______ (already happened, addresses almost depleted)\n##      Cause: _______ (Internet growth faster than expected)\n##      \n##      Solutions:\n##      1. Subnetting: Use address space more efficiently\n##      2. NAT: Share single public IP among many devices\n##      3. IPv6: New protocol with vastly more addresses\n\n## Q15: CIDR supernetting:\n##      Scenario: ISP has these subnets to aggregate:\n##      - 192.168.0.0/24\n##      - 192.168.1.0/24\n##      - 192.168.2.0/24\n##      - 192.168.3.0/24\n##      \n##      Supernet: _______ (192.168.0.0/22)\n##      Benefit: _______ (fewer routes in table)\n\n## PART 5: PRACTICAL CALCULATIONS\n## Q16: Given 10.0.0.0/8, divide into departments:\n##      Network: 10.0.0.0/8 (16.7M hosts total)\n##      \n##      Departments:\n##      - Engineering (3,000): Need _______ (/20, 4,094 hosts)\n##      - Sales (1,500): Need _______ (/21, 2,046 hosts)\n##      - Operations (500): Need _______ (/23, 510 hosts)\n##      - Administration (100): Need _______ (/25, 126 hosts)\n##      \n##      Allocations:\n##      - Engineering: 10.0.0.0/20\n##      - Sales: 10.16.0.0/21\n##      - Operations: 10.24.0.0/23\n##      - Administration: 10.26.0.0/25\n\n## Q17: Given 172.16.0.0/12, calculate subnets:\n##      Network: 172.16.0.0/12 (1M hosts total)\n##      \n##      Create /24 subnets: _______ (how many /24s fit?)\n##      Calculation: (32-24) - (32-12) = _______ (12 bits available)\n##      Answer: 2^12 = _______ (4,096 subnets of /24)\n##      \n##      Addressing:\n##      - Subnet 1: 172.16.0.0/24\n##      - Subnet 2: 172.16.1.0/24\n##      - Subnet 3: 172.16.2.0/24\n##      - ...\n##      - Subnet 4096: 172.31.255.0/24\n\n## Q18: Find next available subnet:\n##      Current subnets:\n##      - 10.0.0.0/24: 10.0.0.1-254\n##      - 10.0.1.0/24: 10.0.1.1-254\n##      - 10.0.2.0/24: 10.0.2.1-254\n##      \n##      Next available: _______ (10.0.3.0/24)\n##      Pattern: Each /24 uses 256 addresses\n##      Next after 10.0.2.255 is _______ (10.0.3.0)\n\n## Q19: Subnet size determination:\n##      For 150 employees + 30% growth = 195 IPs needed\n##      \n##      Options:\n##      - /25 (126 hosts): _______ (insufficient)\n##      - /24 (254 hosts): _______ (sufficient)\n##      - /23 (510 hosts): _______ (excessive)\n##      \n##      Recommendation: _______ (/24, best fit)\n\n## Q20: Subnetting exercise:\n##      Given: 192.168.0.0/22\n##      Requirement: 4 equal subnets\n##      \n##      Current: /22 = 1,022 hosts total\n##      Each subnet: 1,022 / 4 = _______ (255 hosts each)\n##      New prefix: _______ (/24, 254 hosts per subnet)\n##      \n##      Result:\n##      - 192.168.0.0/24 (0-255)\n##      - 192.168.1.0/24 (256-511)\n##      - 192.168.2.0/24 (512-767)\n##      - 192.168.3.0/24 (768-1023)",
  "solution": "# IPv4 ADDRESS CLASSES SOLUTION\n\n## PART 1: CLASSFUL ROUTING (LEGACY)\n\n### Why Classful Routing?\n\n**Historical context**:\n- 1980s: Early internet\n- Problem: Inefficient allocation (too much waste)\n- Solution: Divide address space into classes\n- Result: **ORGANIZATIONS GET APPROPRIATE SIZE** ‚úì\n- Status: Replaced by CIDR (classless routing)\n\n### Class A Characteristics\n\n**Range**: 1.0.0.0 - 126.255.255.255\n**Leading bit**: **0XXXXXX...** (0 followed by anything)\n**Default mask**: **/8 (255.0.0.0)**\n**Max networks**: **126** (0 and 127 reserved)\n**Hosts per network**: **16,777,214** (2^24 - 2)\n**Network size**: **HUGE** üî¥\n**Allocation**: **COUNTRIES, VERY LARGE ORGS**\n**Status**: OBSOLETE but understand for history\n\n### Class B Characteristics\n\n**Range**: 128.0.0.0 - 191.255.255.255\n**Leading bits**: **10XXXXXX...** (10 followed by anything)\n**Default mask**: **/16 (255.255.0.0)**\n**Max networks**: **16,384**\n**Hosts per network**: **65,534** (2^16 - 2)\n**Network size**: **VERY LARGE** üü†\n**Allocation**: **UNIVERSITIES, LARGE ENTERPRISES**\n**Status**: OBSOLETE\n\n### Class C Characteristics\n\n**Range**: 192.0.0.0 - 223.255.255.255\n**Leading bits**: **110XXXXX...** (110 followed by anything)\n**Default mask**: **/24 (255.255.255.0)**\n**Max networks**: **2,097,152**\n**Hosts per network**: **254** (2^8 - 2)\n**Network size**: **SMALL** üü¢\n**Allocation**: **SMALL BUSINESSES, LABS**\n**Status**: STILL COMMON ‚úì\n\n### Class D and E\n\n**Class D**: **224.0.0.0 - 239.255.255.255**\n**Purpose**: **MULTICAST**\n- Example use: **VIDEO STREAMING, MULTIMEDIA**\n- Routing: Special multicast routing\n\n**Class E**: **240.0.0.0 - 255.255.255.255**\n**Purpose**: **RESERVED FOR FUTURE USE**\n- Status: **NOT ALLOCATED TO ANYONE** ‚ùå\n- May be used for research\n\n## PART 2: CLASSLESS ROUTING (CIDR)\n\n### CIDR Notation\n\n**CIDR**: Classless Inter-Domain Routing\n**Format**: **IP/PREFIX_LENGTH**\n**Example**: 192.168.1.0/24\n\n**Meaning**:\n- 192.168.1.0 = Network address\n- /24 = Prefix length (24 bits = network)\n- Remaining: 32 - 24 = **8 bits = host**\n\n**Benefit**: **ANY PREFIX LENGTH, NOT JUST /8, /16, /24** ‚úì\n- Flexibility: Allocate exactly what's needed\n- Efficiency: No wasted address space\n- Example: /25, /26, /27 (between classes)\n\n### Common CIDR Prefix Lengths\n\n- **/8**: **255.0.0.0 (16M HOSTS)** - Very large\n- **/16**: **255.255.0.0 (64K HOSTS)** - Large\n- **/24**: **255.255.255.0 (254 HOSTS)** - Standard small office\n- **/30**: **255.255.255.252 (2 HOSTS)** - Router-to-router links ‚úì\n- **/32**: **255.255.255.255 (1 HOST)** - Single host route (loopback)\n\n### Converting Between CIDR and Masks\n\n- /25 = **255.255.255.128**\n- /26 = **255.255.255.192**\n- /27 = **255.255.255.224**\n- /28 = **255.255.255.240**\n\n**Pattern**: Each /1 increment flips one more bit in mask to 1\n- Binary: Each position (8 positions per octet)\n- 128 = 10000000, 192 = 11000000, 224 = 11100000, 240 = 11110000\n\n## PART 3: ADDRESS ALLOCATION SCENARIOS\n\n### Allocating to Enterprise (500 Employees)\n\n**Requirement**: **>500 IPS, FOR GROWTH**\n**Minimum**: **/23 (510 HOSTS)**\n\n**Options**:\n- /23 (510 hosts): Efficient, fits now ‚úì\n- /22 (1,022 hosts): More room for growth ‚úì‚úì\n- Recommendation: **/22 PREFERRED** (future-proof)\n\n**Example allocation**: 10.0.0.0/22\n\n### Allocating to Small Startup (30 Employees)\n\n**Requirement**: **>30 IPS**\n**Minimum**: **/26 (62 HOSTS)**\n\n**Options**:\n- /26 (62 hosts): Efficient ‚úì\n- /25 (126 hosts): Wasteful but simple\n- Recommendation: **/26 PREFERRED** (no waste)\n\n**Example allocation**: 192.168.100.0/26\n\n### Allocating to Branch Office (10 Employees)\n\n**Requirement**: **>10 IPS**\n**Minimum**: **/28 (14 HOSTS)**\n\n**Options**:\n- /28 (14 hosts): Efficient for small site ‚úì\n- /26 (62 hosts): Wasteful\n- Recommendation: **/28**\n\n**Example allocation**: 10.1.1.0/28\n\n### Allocating to Router-to-Router Link\n\n**Requirement**: **2 IPS ONLY**\n**Allocation**: **/30** ‚úì\n**Hosts**: 2 (router A, router B)\n\n**Example**: 10.1.1.0/30\n- 10.1.1.0: Network\n- 10.1.1.1: Router A\n- 10.1.1.2: Router B\n- 10.1.1.3: Broadcast\n\n## PART 4: ADDRESS SPACE HIERARCHY\n\n### RIR (Regional Internet Registries)\n\n**Organizations**:\n- **ARIN**: **NORTH AMERICA**\n- **RIPE NCC**: **EUROPE, MIDDLE EAST**\n- **APNIC**: **ASIA-PACIFIC**\n- **LACNIC**: **LATIN AMERICA**\n- **AFNIC**: **AFRICA**\n\n**Allocation hierarchy**:\n1. IANA allocates to RIRs\n2. RIR allocates to ISPs and orgs\n3. ISP allocates to customers\n\n**Benefit**: **GEOGRAPHIC-BASED ALLOCATION, ROUTING EFFICIENCY**\n\n### Address Exhaustion Issue\n\n**Problem**: **IPv4 ADDRESSES RUNNING OUT** ‚ö†Ô∏è\n**When**: **ALREADY HAPPENED, ADDRESSES ALMOST DEPLETED** üî¥\n**Cause**: **INTERNET GROWTH FASTER THAN EXPECTED**\n\n**Solutions**:\n1. **Subnetting**: Use address space more efficiently\n2. **NAT**: Share single public IP among many devices\n3. **IPv6**: New protocol with vastly more addresses (solution!)\n\n### CIDR Supernetting\n\n**Scenario**: ISP has these subnets to aggregate:\n- 192.168.0.0/24\n- 192.168.1.0/24\n- 192.168.2.0/24\n- 192.168.3.0/24\n\n**Supernet**: **192.168.0.0/22** ‚úì\n**Benefit**: **FEWER ROUTES IN TABLE** (1 route instead of 4)\n**Routing**: More efficient BGP announcements\n\n## PART 5: PRACTICAL CALCULATIONS\n\n### Given 10.0.0.0/8, Divide into Departments\n\n**Network**: 10.0.0.0/8 (16.7M hosts total)\n\n**Departments**:\n- Engineering (3,000): Need **/20 (4,094 HOSTS)** ‚úì\n- Sales (1,500): Need **/21 (2,046 HOSTS)** ‚úì\n- Operations (500): Need **/23 (510 HOSTS)** ‚úì\n- Administration (100): Need **/25 (126 HOSTS)** ‚úì\n\n**Allocations**:\n- Engineering: 10.0.0.0/20\n- Sales: 10.16.0.0/21\n- Operations: 10.24.0.0/23\n- Administration: 10.26.0.0/25\n\n### Given 172.16.0.0/12, Calculate Subnets\n\n**Network**: 172.16.0.0/12 (1M hosts total)\n\n**Create /24 subnets**: **HOW MANY /24s FIT?**\n**Calculation**: (32-24) - (32-12) = **12 BITS AVAILABLE**\n**Answer**: 2^12 = **4,096 SUBNETS OF /24** ‚úì\n\n**Addressing**:\n- Subnet 1: 172.16.0.0/24\n- Subnet 2: 172.16.1.0/24\n- Subnet 3: 172.16.2.0/24\n- ...\n- Subnet 4096: 172.31.255.0/24\n\n### Find Next Available Subnet\n\n**Current subnets**:\n- 10.0.0.0/24: 10.0.0.1-254\n- 10.0.1.0/24: 10.0.1.1-254\n- 10.0.2.0/24: 10.0.2.1-254\n\n**Next available**: **10.0.3.0/24** ‚úì\n**Pattern**: Each /24 uses 256 addresses\n**Next after 10.0.2.255 is**: **10.0.3.0**\n\n### Subnet Size Determination\n\n**For 150 employees + 30% growth = 195 IPs needed**\n\n**Options**:\n- /25 (126 hosts): **INSUFFICIENT** ‚ùå\n- /24 (254 hosts): **SUFFICIENT** ‚úì\n- /23 (510 hosts): **EXCESSIVE** (but OK)\n\n**Recommendation**: **/24 (BEST FIT)** ‚úì\n\n### Subnetting Exercise\n\n**Given**: 192.168.0.0/22\n**Requirement**: 4 equal subnets\n\n**Current**: /22 = 1,022 hosts total\n**Each subnet**: 1,022 / 4 = **~255 HOSTS EACH**\n**New prefix**: **/24 (254 HOSTS PER SUBNET)** ‚úì\n\n**Result**:\n- 192.168.0.0/24 (0-255)\n- 192.168.1.0/24 (256-511)\n- 192.168.2.0/24 (512-767)\n- 192.168.3.0/24 (768-1023)",
  "hints": [
    "Classful routing (Classes A-E) is legacy; CIDR (classless) is modern and flexible",
    "Class A (/8) = huge networks; Class B (/16) = medium; Class C (/24) = small",
    "CIDR format: IP/prefix_length; /24 means 24 network bits, 8 host bits",
    "/30 = 2 hosts (perfect for router-to-router links); /32 = 1 host (loopback)",
    "Private ranges: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16",
    "Supernetting: Combine multiple smaller subnets into one larger prefix",
    "Address exhaustion: IPv4 nearly depleted; solutions: NAT, subnetting, IPv6",
    "Prefix length increases = smaller subnets; each /1 = half the hosts",
    "RIRs (ARIN, RIPE, APNIC, LACNIC, AFNIC) allocate addresses by geography",
    "Subnetting math: 2^(host_bits) = total; 2^(host_bits) - 2 = usable hosts"
  ],
  "testCases": [
    {"id": "tc1-classful", "description": "Classful routing", "input": "Classes A-E", "expected": "Different ranges and purposes", "assert": "assert ('class' in solution.lower() or 'a' in solution.lower() or '192' in solution)"},
    {"id": "tc2-cidr", "description": "CIDR notation", "input": "Prefix length", "expected": "IP/prefix format", "assert": "assert ('cidr' in solution.lower() or 'prefix' in solution.lower() or '/' in solution)"},
    {"id": "tc3-masks", "description": "Subnet masks", "input": "Convert CIDR to mask", "expected": "Binary and decimal", "assert": "assert ('mask' in solution.lower() or '255' in solution or 'binary' in solution.lower())"},
    {"id": "tc4-allocation", "description": "Address allocation", "input": "Size to prefix", "expected": "Enterprise, startup, branch, router", "assert": "assert ('enterprise' in solution.lower() or 'startup' in solution.lower() or 'branch' in solution.lower())"},
    {"id": "tc5-rirs", "description": "RIRs", "input": "Geographic allocation", "expected": "Five RIRs, hierarchy", "assert": "assert ('arin' in solution.lower() or 'ripe' in solution.lower() or 'apnic' in solution.lower() or 'registr' in solution.lower())"},
    {"id": "tc6-exhaustion", "description": "Address exhaustion", "input": "IPv4 running out", "expected": "Solutions: NAT, IPv6", "assert": "assert ('exhaustion' in solution.lower() or 'depleted' in solution.lower() or 'nat' in solution.lower() or 'ipv6' in solution.lower())"},
    {"id": "tc7-supernet", "description": "Supernetting", "input": "Aggregate subnets", "expected": "Combine smaller to larger", "assert": "assert ('supernet' in solution.lower() or 'aggregat' in solution.lower() or 'routes' in solution.lower())"},
    {"id": "tc8-calculations", "description": "Subnet calculations", "input": "Math: 2^n", "expected": "Subnets and hosts", "assert": "assert ('2^' in solution or 'subnet' in solution.lower() or 'host' in solution.lower())"},
    {"id": "tc9-private", "description": "Private ranges", "input": "RFC 1918", "expected": "10, 172.16, 192.168", "assert": "assert ('private' in solution.lower() or '10.' in solution or '172.16' in solution or '192.168' in solution)"},
    {"id": "tc10-sizing", "description": "Subnet sizing", "input": "Match size to need", "expected": "Efficiency vs growth", "assert": "assert ('size' in solution.lower() or 'efficien' in solution.lower() or 'growth' in solution.lower())"}
  ]
}
