{
  "id": "exercise-017-routing-fundamentals",
  "lessonId": "lesson-017-routing-fundamentals",
  "title": "Static Routing, Default Routes, and Floating Static Route Configuration",
  "description": "You are a network technician for a medium-sized company with multiple office locations. Complete these realistic static routing configuration and troubleshooting scenarios. Each scenario tests your understanding of routing table operation, administrative distance, and path selection decision-making in practical network situations.",
  "difficulty": "intermediate",
  "points": 100,
  "language": "cisco-ios",
  "starterCode": "# ============================================================================\n# NETWORK TOPOLOGY CONTEXT\n# ============================================================================\n# Your company has three office locations connected as follows:\n#\n#                    ISP Router (R3)\n#                    203.0.113.1\n#                         |\n#                    10.1.13.0/30\n#                         |\n#         HQ Router (R1) -------- Branch1 Router (R2) -------- Branch2 LAN\n#    10.1.12.0/30              10.1.23.0/30          192.168.20.0/24\n#         |                                                |\n#    192.168.10.0/24                               (User complaint: Cannot access HQ)\n#    (Headquarters LAN)\n#\n# R1 (HQ): GigabitEthernet0/0 = 192.168.10.1, GigabitEthernet0/1 = 10.1.12.1\n# R2 (Branch1): GigabitEthernet0/0 = 10.1.12.2, GigabitEthernet0/1 = 10.1.23.1\n# R3 (ISP): GigabitEthernet0/0 = 10.1.13.2\n#\n# Note: For simplicity, this exercise focuses on configuring R1 and R2 with static routes.\n# ============================================================================\n\n# ============================================================================\n# SCENARIO 1: USER COMPLAINT - CONNECTIVITY ISSUE\n# ============================================================================\n# Branch2 users are reporting they cannot access resources at HQ (192.168.10.0/24).\n# Currently, R1 has NO route to 192.168.20.0/24 (Branch2 LAN).\n# R2 has NO route to 192.168.10.0/24 (HQ LAN).\n# Users can ping their local gateway but cannot reach other sites.\n#\n# TASK 1.1: Configure R1 to reach Branch2 LAN (192.168.20.0/24)\n# Your command:\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n# TASK 1.2: Explain your answer\n# Why did you use this next-hop IP? What network is it in?\n# Your answer:\n#\n#\n# TASK 1.3: Configure R2 to reach HQ LAN (192.168.10.0/24)\n# Your command:\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n\n# ============================================================================\n# SCENARIO 2: DEFAULT ROUTE AND INTERNET ACCESS\n# ============================================================================\n# Your ISP wants HQ to send all unknown traffic (anything not in local routing table)\n# to ISP Router R3 at 10.1.13.2 for Internet access.\n# Currently, there is NO way for R1 to reach Internet-destined traffic.\n#\n# TASK 2.1: Configure default route on R1\n# Your command (use 0.0.0.0 catch-all):\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n# TASK 2.2: Explain default route behavior\n# When R1 receives packet destined to 8.8.8.8 (Google DNS), what happens?\n# A) Router has specific route to 8.8.8.8 → use that\n# B) Router uses longest prefix match → no match → uses default route\n# C) Router drops the packet\n# D) Router checks firewall first\n# Your answer: \n#\n# TASK 2.3: Configure default route on R2\n# Users at Branch2 need Internet access routed through HQ.\n# Your command:\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n\n# ============================================================================\n# SCENARIO 3: REDUNDANCY WITH FLOATING STATIC ROUTES\n# ============================================================================\n# Your company wants backup Internet link through Branch1 (R2) if primary fails.\n# R2 connects directly to ISP at 203.0.113.2.\n# PRIMARY PATH: R1 → R3 (ISP)\n# BACKUP PATH: R1 → R2 → R3 (ISP)\n#\n# Currently, OSPF is running between R1-R2 with AD=110 for the 0.0.0.0/0 default route\n# from R2. You need a backup floating static route that activates if OSPF fails.\n#\n# TASK 3.1: Create primary default route (direct to ISP)\n# This should have AD=1 (static default)\n# Your command:\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n# TASK 3.2: Create floating static backup route\n# When should this route activate? (Circle/select one)\n# A) Always active, load-balances with primary\n# B) Only when OSPF route (AD=110) fails\n# C) Only when primary fails AND OSPF fails\n# D) Never - floating statics aren't used for Internet\n# Your answer: \n#\n# TASK 3.3: Configure floating static backup to ISP through R2\n# Route should activate if primary direct link to ISP fails.\n# What AD should you use? (Hint: Must be > primary AD=1, but < OSPF AD=110)\n# Your command:\n# ip route ___.___.___.___ ___.___.___.__ ___.___.___.___ \n#\n# TASK 3.4: Administrative Distance Decision Table\n# Fill in the default AD values for each route source:\n# \n# Route Source                    | Default AD\n# Connected network                | ___\n# Static route                     | ___\n# EIGRP Summary route              | ___\n# EIGRP internal route             | ___\n# OSPF route                       | ___\n# RIP route                        | ___\n#\n\n# ============================================================================\n# SCENARIO 4: TROUBLESHOOTING - ROUTE APPEARS IN CONFIG BUT NOT ROUTING TABLE\n# ============================================================================\n# You configured: ip route 172.16.0.0 255.255.0.0 10.50.50.1\n# But when you run \"show ip route static\", this route does NOT appear!\n# The router shows ERROR: \"10.50.50.1 is not a directly connected network\"\n#\n# TASK 4.1: What is the problem?\n# A) Syntax is wrong\n# B) The next-hop 10.50.50.1 doesn't exist in any interface or route\n# C) You need to add \"ip route recursion\" command\n# D) Connected routes have higher AD\n# Your answer: \n#\n# TASK 4.2: How would you fix this? (2-3 methods)\n# Method 1:\n#\n# Method 2:\n#\n# Method 3:\n#\n\n# ============================================================================\n# SCENARIO 5: ROUTING TABLE LOOKUP AND LONGEST PREFIX MATCH\n# ============================================================================\n# R1 routing table contains:\n# S       192.168.0.0/16 [1/0] via 10.1.12.2\n# S       192.168.50.0/24 [1/0] via 10.1.12.3\n# S       192.168.55.5/32 [1/0] via 10.1.12.4\n# S*      0.0.0.0/0 [1/0] via 10.1.13.2\n#\n# Packet arrives destined to 192.168.55.5 (specific host)\n#\n# TASK 5.1: Which route will be used?\n# Your answer: \n# Your explanation (why not use 192.168.0.0/16?):\n#\n\n# ============================================================================\n# SCENARIO 6: ASYMMETRIC ROUTING AND RETURN PATH\n# ============================================================================\n# You configured R1 with:\n# ip route 10.20.0.0 255.255.0.0 10.1.12.2\n# But R2 (at 10.1.12.2) does NOT have a route back to R1's networks.\n# Users at 10.20.0.0 can SEND packets to R1 but RECEIVE nothing.\n#\n# TASK 6.1: Describe the problem\n# What OSI layer concept is broken here?\n# Your answer:\n#\n# TASK 6.2: What must be configured on R2 to fix this?\n# Your answer:\n#\n\n# ============================================================================\n# SCENARIO 7: NETWORK COMMANDS - VERIFICATION AND TESTING\n# ============================================================================\n# You've configured all static routes. Now verify everything works.\n#\n# TASK 7.1: Show only static routes in routing table\n# Your command:\n#\n# TASK 7.2: Display complete details for route to 192.168.20.0\n# Your command:\n#\n# TASK 7.3: Test connectivity to 192.168.20.5 showing each hop\n# Your command:\n#\n# TASK 7.4: What does each field mean in output below?\n# show ip route 192.168.20.0\n# Routing entry for 192.168.20.0/24\n#   Known via \"static\", distance 1, metric 0\n#   Routing Descriptor Blocks:\n#   * 10.1.12.2\n#       Route metric is 0, traffic share count is 1\n#\n# \"distance 1\" means: \n# \"metric 0\" means:\n# \"10.1.12.2\" means:\n# \"*\" (asterisk) means:\n#\n\n# ============================================================================\n# SCENARIO 8: POINT-TO-POINT LINK - EXIT INTERFACE VS NEXT-HOP\n# ============================================================================\n# You have two static route configurations:\n# CONFIG A: ip route 192.168.20.0 255.255.255.0 10.1.12.2\n# CONFIG B: ip route 192.168.20.0 255.255.255.0 GigabitEthernet0/1\n#\n# TASK 8.1: Which is better for point-to-point Serial link?\n# Your answer: \n#\n# TASK 8.2: Explain why\n# Your explanation:\n#\n",
  "solution": "# ============================================================================\n# SCENARIO 1: USER COMPLAINT - CONNECTIVITY ISSUE (SOLUTIONS)\n# ============================================================================\n\n# TASK 1.1: Configure R1 to reach Branch2 LAN (192.168.20.0/24)\n# ANSWER:\n# ip route 192.168.20.0 255.255.255.0 10.1.12.2\n#\n# EXPLANATION:\n# - Destination: 192.168.20.0/24 (Branch2 LAN) is the network we want to reach\n# - Subnet mask: 255.255.255.0 represents /24 prefix length\n# - Next-hop: 10.1.12.2 is R2's interface on the link to R1\n# - Path: R1 will send packets destined to Branch2 to R2, which will forward them\n#\n# TASK 1.2: Explain your answer\n# ANSWER: \n# 10.1.12.2 is the next-hop IP address on the 10.1.12.0/30 network directly connected\n# to R1's GigabitEthernet0/1 interface. This is in the R1-R2 WAN link network.\n# R1 can reach this because it's directly connected, so the recursive lookup succeeds.\n#\n# TASK 1.3: Configure R2 to reach HQ LAN (192.168.10.0/24)\n# ANSWER:\n# ip route 192.168.10.0 255.255.255.0 10.1.12.1\n#\n# EXPLANATION:\n# - Destination: 192.168.10.0/24 (HQ LAN at R1)\n# - Next-hop: 10.1.12.1 is R1's interface on the link to R2\n# - This allows Branch2 users to reach HQ resources\n# - Packet path: Branch2 (192.168.20.x) → R2 → R1 → HQ LAN users\n#\n\n# ============================================================================\n# SCENARIO 2: DEFAULT ROUTE AND INTERNET ACCESS (SOLUTIONS)\n# ============================================================================\n\n# TASK 2.1: Configure default route on R1\n# ANSWER:\n# ip route 0.0.0.0 0.0.0.0 10.1.13.2\n#\n# EXPLANATION:\n# - 0.0.0.0/0 is the default route (matches ALL IP addresses)\n# - Next-hop 10.1.13.2 is the ISP router R3\n# - Any traffic that doesn't match a more specific route goes to the ISP\n# - Becomes the \"gateway of last resort\" for Internet traffic\n#\n# TASK 2.2: Explain default route behavior\n# ANSWER: B) Router uses longest prefix match → no match → uses default route\n#\n# EXPLANATION:\n# When R1 receives packet to 8.8.8.8:\n# 1. Router performs longest prefix match on 8.8.8.8\n# 2. Checks specific routes first (192.168.20.0/24, 192.168.10.0/24, etc.)\n# 3. None match - these are all different networks\n# 4. Default route 0.0.0.0/0 matches everything (matches 8.8.8.8)\n# 5. Routes packet to ISP via 10.1.13.2\n# This is how Internet traffic escapes the private network.\n#\n# TASK 2.3: Configure default route on R2\n# ANSWER:\n# ip route 0.0.0.0 0.0.0.0 10.1.12.1\n#\n# EXPLANATION:\n# - Branch2 users' default gateway is R2\n# - R2 has two options for unknown destinations: HQ (R1) or ISP (R3)\n# - R2's default route points to R1, which has the ISP connection\n# - Path: Branch2 → R2 → R1 → ISP → Internet\n# - This provides Internet access through the HQ router\n#\n\n# ============================================================================\n# SCENARIO 3: REDUNDANCY WITH FLOATING STATIC ROUTES (SOLUTIONS)\n# ============================================================================\n\n# TASK 3.1: Create primary default route (direct to ISP)\n# ANSWER:\n# ip route 0.0.0.0 0.0.0.0 10.1.13.2\n#\n# EXPLANATION:\n# - Static route AD=1 (default for static routes)\n# - This is the primary path: direct connection to ISP\n# - More efficient than going through R2\n# - Used when available\n#\n# TASK 3.2: Create floating static backup route - When activates?\n# ANSWER: B) Only when OSPF route (AD=110) fails\n#\n# EXPLANATION:\n# Floating static routes only activate when:\n# 1. The primary route becomes unavailable\n# 2. When the administrative distance is HIGHER than the primary route\n# This isn't a backup to the primary static route (AD=1).\n# This floating static (AD=5) provides redundancy by giving ANOTHER path\n# between the direct ISP link (AD=1) and the OSPF-learned default route (AD=110).\n# \n# Scenario: If primary ISP link down:\n# - Primary static 0.0.0.0/0 AD=1 → DOWN\n# - Floating static 0.0.0.0/0 AD=5 → ACTIVATES\n# - OSPF 0.0.0.0/0 AD=110 → Still available\n# The floating static becomes the best route.\n#\n# TASK 3.3: Configure floating static backup\n# ANSWER:\n# ip route 0.0.0.0 0.0.0.0 10.1.12.2 5\n#\n# EXPLANATION:\n# - AD=5 (lower than OSPF 110, but higher than primary static 1)\n# - Next-hop 10.1.12.2 is R2 (which connects to ISP)\n# - Route installs only if primary direct ISP link (AD=1) fails\n# - Provides redundancy without needing complex dynamic routing protocols\n# - Convergence is immediate (no protocol timers to wait for)\n#\n# Administrative Distance Hierarchy (better → worse):\n# Connected (0) > Static (1) < Floating Static (5) < OSPF (110) < RIP (120)\n#\n# TASK 3.4: Administrative Distance Values\n# ANSWER:\n# Connected network                | 0 (most trusted, directly attached)\n# Static route                     | 1 (very trustworthy, manually configured)\n# EIGRP Summary route              | 5 (rare, only for EIGRP summary routes)\n# EIGRP internal route             | 90 (standard EIGRP)\n# OSPF route                       | 110 (standard IGP protocol)\n# RIP route                        | 120 (least trusted of major protocols)\n#\n# MEMORY AID: \"Dead Cats Eat Off Icky Rats\" for 0-90-110-120\n# This hierarchy means static routes ALWAYS beat dynamic protocols\n#\n\n# ============================================================================\n# SCENARIO 4: TROUBLESHOOTING - ROUTE NOT IN TABLE (SOLUTIONS)\n# ============================================================================\n\n# TASK 4.1: What is the problem?\n# ANSWER: B) The next-hop 10.50.50.1 doesn't exist in any interface or route\n#\n# EXPLANATION:\n# This is the \"unresolvable next-hop\" problem:\n# - Router cannot install static routes with unreachable next-hop\n# - 10.50.50.1 is not in the routing table and not directly connected\n# - Static routes require \"recursive lookup\" - can you reach the next-hop?\n# - If no route to next-hop exists, the static route cannot be installed\n# - Error message confirms: \"10.50.50.1 is not a directly connected network\"\n#\n# TASK 4.2: How would you fix this?\n# ANSWER (3 solutions):\n#\n# Method 1: Use an exit interface instead of next-hop IP\n# ip route 172.16.0.0 255.255.0.0 Serial0/0/0\n# - Works on point-to-point links\n# - No recursive lookup needed\n# - Route activates if interface is up\n#\n# Method 2: Change next-hop to a reachable IP address\n# First verify what routes exist:\n#   show ip route\n# If next-hop is in different network:\n#   ip route 172.16.0.0 255.255.0.0 10.1.1.1  (if 10.1.1.1 is reachable)\n# - Use an IP address you know exists\n# - Recursive lookup can succeed\n#\n# Method 3: Add a route to the unreachable network first\n# ip route 10.50.50.0 255.255.255.0 GigabitEthernet0/0\n# ip route 172.16.0.0 255.255.0.0 10.50.50.1\n# - First route makes next-hop reachable\n# - Second route can then be installed\n# - Requires knowing the network topology\n#\n\n# ============================================================================\n# SCENARIO 5: LONGEST PREFIX MATCH (SOLUTIONS)\n# ============================================================================\n\n# TASK 5.1: Which route will be used?\n# ANSWER: 192.168.55.5/32 via 10.1.12.4\n#\n# EXPLANATION OF LONGEST PREFIX MATCH:\n# Routing table lookup for destination 192.168.55.5:\n#\n# Route 1: 192.168.0.0/16 (covers 192.168.0.0 to 192.168.255.255)\n#          Matches: YES (192.168.55.5 is in this range)\n#          Prefix length: 16 bits\n#\n# Route 2: 192.168.50.0/24 (covers 192.168.50.0 to 192.168.50.255)\n#          Matches: NO (192.168.55.5 is not in this range, .55 ≠ .50)\n#\n# Route 3: 192.168.55.5/32 (covers exactly 192.168.55.5)\n#          Matches: YES (exact match)\n#          Prefix length: 32 bits (most specific!)\n#\n# Route 4: 0.0.0.0/0 (default route, matches everything)\n#          Matches: YES\n#          Prefix length: 0 bits (least specific)\n#\n# LONGEST PREFIX MATCH ALGORITHM:\n# 1. Find all matching routes: Routes 1, 3, and 4 match\n# 2. Select route with longest (most specific) prefix: Route 3 (/32 is longest)\n# 3. Use route 192.168.55.5/32 via 10.1.12.4\n#\n# Why not 192.168.0.0/16?\n# Because 192.168.55.5/32 is MORE SPECIFIC:\n# - /16 provides general match\n# - /32 provides exact match\n# - Most specific always wins (network design principle)\n# - This allows traffic engineering (send specific traffic via different paths)\n#\n\n# ============================================================================\n# SCENARIO 6: ASYMMETRIC ROUTING (SOLUTIONS)\n# ============================================================================\n\n# TASK 6.1: Describe the problem\n# ANSWER: This is an ASYMMETRIC ROUTING issue - return path is broken\n# OSI Layer 3 (Network Layer) concept affected: Bidirectional connectivity\n#\n# EXPLANATION:\n# Users can send: 10.20.0.0 → (R2) → 10.1.12.1 (R1) ✓ (Works because R1 has route)\n# Users receive: 10.20.0.0 ← (R2) ← ? ✗ (Fails because R2 has no return route)\n#\n# IP communication is BIDIRECTIONAL - data flows in BOTH directions:\n#   REQUEST: Client → Server (uses R1's route)\n#   RESPONSE: Server → Client (needs RETURN path via R2)\n#\n# This breaks TCP connections (no SYN-ACK back to client)\n# This breaks ping (no ICMP Echo Reply)\n# This breaks all bidirectional protocols\n#\n# TASK 6.2: What must be configured on R2?\n# ANSWER: R2 needs a route back to the remote networks at 10.20.0.0:\n# ip route 10.20.0.0 255.255.0.0 10.1.12.1\n#\n# EXPLANATION:\n# - Symmetric routing requires MATCHING routes in BOTH directions\n# - If R1 sends to 10.20.0.0 via R2, then R2 must know how to reach 10.20.0.0\n# - Typically the return path goes through the same routers (reverse path)\n# - Both directions use the same links (symmetric = balanced)\n#\n# Exception: Asymmetric routing CAN work for certain protocols if carefully designed\n# - Internet routing is often asymmetric (different paths outbound vs inbound)\n# - But for private networks with static routes, plan for symmetry\n#\n\n# ============================================================================\n# SCENARIO 7: NETWORK VERIFICATION COMMANDS (SOLUTIONS)\n# ============================================================================\n\n# TASK 7.1: Show only static routes\n# ANSWER:\n# show ip route static\n#\n# OUTPUT WOULD SHOW:\n# S       192.168.20.0/24 [1/0] via 10.1.12.2\n# S       192.168.10.0/24 [1/0] via 10.1.12.1\n# S       10.20.0.0/16 [1/0] via 10.1.12.2\n# S*      0.0.0.0/0 [1/0] via 10.1.13.2\n#\n# Codes: S = Static route, * = Default route\n#\n# TASK 7.2: Display complete details for route to 192.168.20.0\n# ANSWER:\n# show ip route 192.168.20.0\n#\n# OUTPUT WOULD SHOW:\n# Routing entry for 192.168.20.0/24\n#   Known via \"static\", distance 1, metric 0\n#   Routing Descriptor Blocks:\n#   * 10.1.12.2\n#       Route metric is 0, traffic share count is 1\n#\n# This shows detailed information about the specific route:\n# - How it was learned (static configuration)\n# - Its trustworthiness (distance = AD = 1)\n# - Its cost (metric = 0 for static routes)\n# - How to reach it (next-hop 10.1.12.2)\n#\n# TASK 7.3: Test connectivity to 192.168.20.5 showing each hop\n# ANSWER:\n# traceroute 192.168.20.5\n#\n# OUTPUT WOULD SHOW:\n# Tracing the route to 192.168.20.5\n#     1  10.1.12.2 (R2)  4 msec 4 msec 4 msec\n#     2  192.168.20.5    8 msec 8 msec 8 msec\n#\n# Interpretation:\n# - Hop 1: Packet reaches R2 at 10.1.12.2 (response times in milliseconds)\n# - Hop 2: Packet reaches destination at 192.168.20.5\n# - Each hop shown is a router that processes the packet\n# - If traceroute stops with timeouts, that hop is blocking or unreachable\n#\n# TASK 7.4: Understanding route output fields\n# ANSWER:\n#\n# \"distance 1\" means:\n# - Administrative Distance = 1 (static routes)\n# - Lower values are more trusted\n# - This static route is very trustworthy (only beaten by connected routes)\n# - 0 = connected, 1 = static, 90 = EIGRP, 110 = OSPF, 120 = RIP\n#\n# \"metric 0\" means:\n# - Cost to reach destination = 0\n# - Static routes have no metric (not calculated dynamically)\n# - Different from OSPF (metric based on bandwidth) or RIP (metric = hop count)\n# - Used for comparison with other routes from same source\n#\n# \"10.1.12.2\" means:\n# - Next-hop router's IP address\n# - Where this router sends packets destined to 192.168.20.0/24\n# - 10.1.12.2 is R2's interface on the WAN link to R1\n# - Packet goes to R2 first, then R2 forwards to Branch2\n#\n# \"*\" (asterisk) means:\n# - This is the actively used route (best route among all matches)\n# - Multiple routes might match in ECMP (Equal-Cost Multi-Path)\n# - Asterisk marks which path actually carries traffic\n# - One route per destination should be marked with *\n#\n\n# ============================================================================\n# SCENARIO 8: POINT-TO-POINT LINKS (SOLUTIONS)\n# ============================================================================\n\n# TASK 8.1: Which is better for point-to-point Serial link?\n# ANSWER: CONFIG B (exit interface) is generally better for point-to-point links\n# CONFIG B: ip route 192.168.20.0 255.255.255.0 GigabitEthernet0/1\n#\n# EXPLANATION:\n# For POINT-TO-POINT links (Serial, PPP, Frame Relay):\n#\n# CONFIG A: Using next-hop IP (10.1.12.2)\n# ✓ Advantages:\n#   - Works on both point-to-point AND multi-access (Ethernet) networks\n#   - Doesn't depend on interface type\n# ✗ Disadvantages:\n#   - Requires recursive lookup (extra processing)\n#   - Router must know how to reach 10.1.12.2 first\n#   - If 10.1.12.2 unreachable for any reason, route won't install\n#\n# CONFIG B: Using exit interface\n# ✓ Advantages:\n#   - No recursive lookup needed (faster)\n#   - Simpler configuration\n#   - Direct interface knowledge\n#   - Best practice for point-to-point links\n# ✗ Disadvantages:\n#   - Route active as long as interface is up/up\n#   - Even if the other router is down, route still exists (misleading)\n#   - Doesn't work well on multi-access networks (ambiguous next-hop)\n#\n# TASK 8.2: Explain why\n# ANSWER:\n# Point-to-point links have ONLY ONE possible remote device:\n# - Serial link between R1-R2: ONLY R2 at the other end\n# - No ambiguity about who receives the packet\n# - Exit interface is sufficient to define the path\n#\n# Multi-access networks (Ethernet) have MULTIPLE possible devices:\n# - Router attached to Ethernet switch with multiple routers\n# - Just knowing \"send out GigabitEthernet0/0\" is ambiguous\n# - Must specify WHICH device (via ARP lookup of next-hop IP)\n# - This is why next-hop is required for Ethernet\n#\n# BEST PRACTICE SUMMARY:\n# ┌─────────────────────────┬──────────────────────┬─────────────────────┐\n# │ Link Type               │ Use Next-Hop         │ Use Exit Interface  │\n# ├─────────────────────────┼──────────────────────┼─────────────────────┤\n# │ Serial/PPP/GRE          │ Works but suboptimal │ ✓ BEST PRACTICE     │\n# │ Frame Relay (P-P)       │ Works but suboptimal │ ✓ BEST PRACTICE     │\n# │ Ethernet (multi-access) │ ✓ REQUIRED           │ Works but risky     │\n# │ VPN Tunnel              │ ✓ REQUIRED           │ Works but unusual   │\n# └─────────────────────────┴──────────────────────┴─────────────────────┘\n#\n",
  "hints": [
    "Static route syntax: 'ip route <destination> <mask> <next-hop|interface> [distance]'",
    "Default route 0.0.0.0 0.0.0.0 matches ALL destinations - it's the 'catch-all'",
    "Administrative Distance: lower values are more trusted (0=connected, 1=static, 110=OSPF, 120=RIP)",
    "Floating static routes have HIGHER AD than primary routes so they only activate when primary fails",
    "Longest prefix match: most specific route wins (192.168.55.5/32 beats 192.168.0.0/16)",
    "Static routes must have resolvable next-hops (next-hop must exist in routing table or be directly connected)",
    "Return paths: if R1 sends to a network, that network's router must have route back to R1 (bidirectional)",
    "For point-to-point links (Serial): use exit interface. For multi-access (Ethernet): use next-hop IP",
    "Verify routes with: 'show ip route static', 'show ip route <destination>', and test with 'traceroute'",
    "Asymmetric routing breaks bidirectional protocols - always plan for symmetric paths with static routes",
    "Connected routes (AD=0) always beat static routes (AD=1) if both exist to same destination",
    "When configuring floating static routes, ensure AD is between primary route and next-best alternative"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Configures static route to 192.168.20.0/24 with correct next-hop",
      "validation": "assert ('ip route 192.168.20.0 255.255.255.0 10.1.12.2' in code or '192.168.20.0' in code and '10.1.12.2' in code)",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Configures default route 0.0.0.0 0.0.0.0 to ISP",
      "validation": "assert ('0.0.0.0 0.0.0.0' in code and '10.1.13.2' in code) or ('default' in code.lower() and 'isp' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Understands floating static routes use higher AD for backup",
      "validation": "assert ('floating' in code.lower() or 'backup' in code.lower() or 'redundan' in code.lower()) and ('ad' in code.lower() or 'distance' in code.lower() or ('5' in code and ('110' in code or 'ospf' in code.lower())))",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Lists correct administrative distance values (0, 1, 90, 110, 120)",
      "validation": "assert code.count('0') >= 2 and '1' in code and ('90' in code or 'eigrp' in code.lower()) and ('110' in code or 'ospf' in code.lower()) and ('120' in code or 'rip' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc5",
      "description": "Explains longest prefix match concept correctly",
      "validation": "assert ('longest' in code.lower() or 'most specific' in code.lower()) and ('/32' in code or '192.168.55.5' in code)",
      "isHidden": false
    },
    {
      "id": "tc6",
      "description": "Identifies unresolvable next-hop as troubleshooting issue",
      "validation": "assert ('unresolv' in code.lower() or 'not directly' in code.lower() or '10.50.50.1' in code) and ('recursive' in code.lower() or 'next-hop' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc7",
      "description": "Describes asymmetric routing return path problem",
      "validation": "assert ('asymmetri' in code.lower() or 'return' in code.lower() or 'bidirection' in code.lower()) and ('path' in code.lower() or 'route back' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc8",
      "description": "Uses correct verification commands (show ip route, traceroute)",
      "validation": "assert ('show ip route' in code.lower() or 'traceroute' in code.lower() or 'ping' in code.lower())",
      "isHidden": false
    },
    {
      "id": "tc9",
      "description": "Total file size is at least 10,000 characters (meets content requirement)",
      "validation": "assert len(code) >= 10000",
      "isHidden": true
    },
    {
      "id": "tc10",
      "description": "Exercise covers all major lesson 017 concepts: static routes, default routes, AD, floating static, verification",
      "validation": "assert ('static' in code.lower() and 'default' in code.lower() and ('administrative' in code.lower() or 'ad' in code.lower()) and ('floating' in code.lower() or 'backup' in code.lower()) and ('show ip' in code.lower() or 'verify' in code.lower() or 'command' in code.lower()))",
      "isHidden": true
    }
  ]
}
