{
  "id": "exercise-047-subnetting-calculations",
  "lessonId": "lesson-047-subnetting-calculations",
  "title": "Subnetting Calculations and Problem-Solving",
  "description": "Master binary subnetting methods, perform complex subnet calculations, and design optimal subnet schemes using multiple calculation techniques for real-world network problems.",
  "difficulty": "advanced",
  "points": 100,
  "language": "text",
  "starterCode": "# SUBNETTING CALCULATIONS EXERCISE\n# Advanced binary methods and practical problem-solving\n\n## SCENARIO: GlobalTech Solutions - Complex Network Design\n## Multi-site corporation needing sophisticated subnetting\n## Current allocation: 10.0.0.0/8 (16.7 million hosts)\n## Challenge: Efficiently allocate subnets across HQ, 3 regions, 25 branches\n\n## PART 1: BINARY SUBNETTING METHOD\n## Q1: Binary method step 1 - Determine required subnets\n##     Scenario: Need 6 equal subnets from 192.168.0.0/24\n##     Formula: 2^n >= required subnets\n##     2^2 = 4 (not enough)\n##     2^3 = _______ (sufficient for 6 subnets)\n##     Must borrow _______ bits from host portion\n\n## Q2: Calculate new prefix length\n##     Original: 192.168.0.0/24\n##     Borrowed bits: 3\n##     New prefix: /24 + 3 = /_______\n##     New subnet mask: 255.255.255._______\n##     (Binary last octet: 11100000)\n\n## Q3: Binary subnet representation\n##     /27 in the last octet:\n##     Bits to work with: 11100000\n##     This means: _______ block size\n##     Subnets created: _______\n##     Host bits remaining: _______ (32 - 27)\n##     Usable hosts per subnet: 2^_______ - 2 = _______\n\n## Q4: List all subnets from binary breakdown\n##     Network 192.168.0.0/27:\n##     Subnet 0 (00000000): 192.168.0._______/27\n##     Subnet 1 (00100000 = 32): 192.168.0.32/27\n##     Subnet 2 (01000000 = _______ ): 192.168.0._______/27\n##     Subnet 3 (01100000 = _______ ): 192.168.0._______/27\n##     Subnet 4 (10000000 = _______ ): 192.168.0._______/27\n##     Subnet 5 (10100000 = _______ ): 192.168.0._______/27\n##     Subnet 6 (11000000 = _______ ): 192.168.0._______/27\n##     Subnet 7 (11100000 = 224): 192.168.0.224/27\n\n## Q5: Complex requirement calculation\n##     Problem: Subnet 172.16.0.0/16 into 1000 subnets\n##     Formula: 2^n >= 1000\n##     2^9 = 512 (not enough)\n##     2^10 = _______ (sufficient) ✓\n##     Must borrow _______ bits from /16\n##     New prefix: /16 + 10 = /_______\n##     New mask: 255.255._______._______\n##     Total subnets: _______ (2^10)\n##     Hosts per subnet: 2^_______ - 2 = _______ usable hosts\n\n## PART 2: SUBNET ALLOCATION FROM HOST COUNT\n## Q6: Reverse calculation - hosts to subnet\n##     Need to support 100 hosts in one subnet:\n##     Minimum host bits: log2(100+2) = log2(102) ≈ _______ bits\n##     Try /25: 2^7 = 128 hosts, 126 usable ✓\n##     Try /26: 2^6 = _______ hosts, 62 usable (too small)\n##     Therefore: Use _______ for 100 hosts\n\n## Q7: Multiple subnet allocation\n##     Need subnets for: 200, 150, 75, 50, 25 hosts\n##     200 hosts: /_______ (256 addresses)\n##     150 hosts: /_______ (128 addresses)\n##     75 hosts: /_______ (128 addresses)\n##     50 hosts: /_______ (64 addresses)\n##     25 hosts: /_______ (32 addresses)\n##     \n##     All these masks are _______ (all /24 or larger)\n\n## Q8: Point-to-point link sizing\n##     Router-to-router connection needs:\n##     Minimum addresses: _______ (2 routers + network + broadcast = 4)\n##     Subnet mask: /_______ \n##     Block size: _______\n##     Usable IPs: _______\n##     Example: 10.0.0.0/30 (routers at .1 and .2)\n##     Example: 10.0.0.4/30 (routers at .5 and .6)\n\n## PART 3: GLOBALTECH SCENARIO\n## Q9: GlobalTech HQ allocation\n##     HQ: 10.0.0.0/16 needs to support 3000 hosts\n##     Calculation:\n##     Need host bits: log2(3000+2) ≈ _______ bits\n##     Try /19: 2^13 = _______ hosts ✓\n##     Allocation: 10.0.0.0/_______\n##     Next available: 10.0.32.0/16 onwards (32 = 2^5, /19 borrowed 5 bits)\n\n## Q10: GlobalTech regions allocation\n##      After HQ uses 10.0.0.0/19, remaining: 10.0.32.0/19 onwards\n##      3 regions need equal allocation:\n##      Bits needed for 3: 2^2 = 4 regions (enough)\n##      Allocate from remaining /19 space:\n##      Region 1 (East): 10.0.32.0/21 (2048 hosts)\n##      Region 2 (West): 10.0.40.0/21 (2048 hosts)\n##      Region 3 (Central): 10.0.48.0/21 (2048 hosts)\n##      \n##      Between Region 1 and 2:\n##      /21 block size: 2^(23-21) = 2^2 = _______ in 3rd octet\n##      Region 1: 10.0.32.0 to 10.0.39.255\n##      Region 2: 10.0.40.0 to 10.0.47.255 ✓\n\n## Q11: GlobalTech branch offices\n##      25 branch offices, each needs 100 hosts\n##      100 hosts = _______ (size needed)\n##      Available space after regions: 10.0.56.0/16 onwards\n##      Per branch: /_______ \n##      Need: 2^5 = _______ branches (25 branches fit in 32)\n##      \n##      Branch allocation (/24 each):\n##      Branch 1: 10.0.56.0/24\n##      Branch 2: 10.0.57.0/24\n##      Branch 3: 10.0.58.0/24\n##      ...\n##      Branch 25: 10.0.80.0/24 (56 + 24 = 80)\n\n## PART 4: SEVEN-SECOND METHOD\n## Q12: Memorized quick reference\n##      Mask Value | Block Size | Subnets | Usable Hosts\n##      /25: 128   | 128        | 2       | _______\n##      /26: 192   | 64         | 4       | _______\n##      /27: 224   | 32         | 8       | _______\n##      /28: 240   | 16         | 16      | _______\n##      /29: 248   | 8          | 32      | _______\n##      /30: 252   | 4          | 64      | _______ ✓ (router links)\n\n## Q13: Quick mask calculation\n##      Mask 255.255.255.224 (last octet = 224)\n##      Binary: 11100000\n##      Count 1s: _______ ones in /27 total\n##      Block: 256 - 224 = _______\n##      Subnets in /24: 256 / 32 = _______\n##      Hosts: 32 - 2 = _______\n\n## Q14: Seven-second drill\n##      Given 192.168.1.0/24, subnet into 4 equal pieces:\n##      Need /_______ (4 = 2^2)\n##      Mask: 255.255.255._______ (192 = 11000000)\n##      Block size: _______\n##      Subnet 1: 192.168.1.0/26\n##      Subnet 2: 192.168.1.64/26\n##      Subnet 3: 192.168.1.128/26\n##      Subnet 4: 192.168.1.192/26 ✓\n\n## PART 5: TROUBLESHOOTING\n## Q15: Overlapping subnet detection\n##      Admin created:\n##      Subnet A: 172.16.0.0/24 (0.0 to 0.255)\n##      Subnet B: 172.16.0.128/25 (0.128 to 0.255)\n##      Problem: _______ subnets _______ (overlap in 0.128-0.255)\n##      Solution: Use either 172.16.0.0/24 and 172.16.1.0/24, OR\n##               use 172.16.0.0/25 and 172.16.0.128/25\n\n## Q16: Insufficient space\n##      Network 192.168.0.0/24 allocated as:\n##      Dept A: 192.168.0.0/25 (126 hosts) ✓\n##      Dept B: 192.168.0.128/25 (126 hosts) ✓\n##      New Dept C needs 50 hosts: Problem = _______\n##      Reason: _______ address space available\n##      Solution: _______ from larger network\n\n## Q17: Asymmetric allocation\n##      Need: 300 hosts, 200 hosts, 50 hosts, 10 hosts\n##      /24 provides _______  hosts (254)\n##      /25 provides _______ hosts (126)\n##      /26 provides _______ hosts (62)\n##      /27 provides _______ hosts (30)\n##      /28 provides _______ hosts (14)\n##      \n##      Best allocation:\n##      Dept A: 300 → _______ (/23 = 512)\n##      Dept B: 200 → _______ (/24 = 256)\n##      Dept C: 50 → _______ (/26 = 62)\n##      Dept D: 10 → _______ (/28 = 14)\n\n## Q18: Supernetting verification\n##      Four /26 networks can be summarized:\n##      192.168.0.0/26\n##      192.168.0.64/26\n##      192.168.0.128/26\n##      192.168.0.192/26\n##      Summary route: 192.168.0.0/_______\n##      Reason: All fit in single /24 block ✓\n\n## Q19: Rapid calculation scenario\n##      Merge 172.16.0.0/25 and 172.16.0.128/25 into one:\n##      Combined: 172.16.0.0/_______\n##      Why: Both /25s together = one /24 ✓\n##      Host count: _______ (126 + 126 + 2)\n\n## Q20: Real-world complexity\n##      ISP has 203.0.113.0/24 for customers:\n##      Large customer: 100 hosts (203.0.113.0/25)\n##      Medium customers: 30 hosts each (/26)\n##      Small customers: 5 hosts each (/29)\n##      \n##      Allocate:\n##      Large: 203.0.113.0/25 (0-127, 126 usable)\n##      Medium 1: 203.0.113.128/26 (128-191)\n##      Medium 2: 203.0.113.192/26 (192-223)\n##      Remaining for small: 203.0.113.224-255\n##      /29 size: _______ addresses (can fit _______ small customers)",
  "solution": "# SUBNETTING CALCULATIONS SOLUTION\n\n## PART 1: BINARY SUBNETTING METHOD\n\n### Step-by-Step Binary Process\n\n**Q1: Determine required subnets**\n\nScenario: Need 6 equal subnets from 192.168.0.0/24\nFormula: 2^n >= required subnets\n2^2 = 4 (not enough)\n2^3 = **8** (sufficient for 6 subnets) ✓\nMust borrow **3** bits from host portion\n\n**Q2: Calculate new prefix length**\n\nOriginal: 192.168.0.0/24\nBorrowed bits: 3\nNew prefix: /24 + 3 = **/27**\nNew subnet mask: 255.255.255.**224**\n(Binary last octet: 11100000 = 128+64+32 = 224)\n\n**Q3: Binary subnet representation**\n\n/27 in the last octet:\nBits to work with: 11100000\nThis means: **32** block size (256/8)\nSubnets created: **8** (2^3)\nHost bits remaining: **5** (32 - 27) ✓\nUsable hosts per subnet: 2^**5** - 2 = **30** ✓\n\n**Q4: List all subnets from binary breakdown**\n\nNetwork 192.168.0.0/27:\nSubnet 0 (00000000): 192.168.0.**0**/27\nSubnet 1 (00100000 = 32): 192.168.0.32/27\nSubnet 2 (01000000 = **64**): 192.168.0.**64**/27 ✓\nSubnet 3 (01100000 = **96**): 192.168.0.**96**/27 ✓\nSubnet 4 (10000000 = **128**): 192.168.0.**128**/27 ✓\nSubnet 5 (10100000 = **160**): 192.168.0.**160**/27 ✓\nSubnet 6 (11000000 = **192**): 192.168.0.**192**/27 ✓\nSubnet 7 (11100000 = 224): 192.168.0.224/27\n\n**Q5: Complex requirement calculation**\n\nProblem: Subnet 172.16.0.0/16 into 1000 subnets\nFormula: 2^n >= 1000\n2^9 = 512 (not enough)\n2^10 = **1024** (sufficient) ✓\nMust borrow **10** bits from /16\nNew prefix: /16 + 10 = **/26**\nNew mask: 255.255.**255**.**192** (192 = 11000000)\nTotal subnets: **1024** (2^10) ✓\nHosts per subnet: 2^**6** - 2 = **62** usable hosts ✓\n\n## PART 2: SUBNET ALLOCATION FROM HOST COUNT\n\n### Reverse Calculation\n\n**Q6: Reverse calculation - hosts to subnet**\n\nNeed to support 100 hosts in one subnet:\nMinimum host bits: log2(100+2) = log2(102) ≈ **7** bits\nTry /25: 2^7 = 128 hosts, 126 usable ✓\nTry /26: 2^6 = **64** hosts, 62 usable (too small)\nTherefore: Use **/25** for 100 hosts ✓\n\n**Q7: Multiple subnet allocation**\n\nNeed subnets for: 200, 150, 75, 50, 25 hosts\n200 hosts: **/24** (256 addresses) ✓\n150 hosts: **/24** (128 addresses) ✓\n75 hosts: **/25** (128 addresses) ✓\n50 hosts: **/26** (64 addresses) ✓\n25 hosts: **/26** (32 addresses) ✓\n\nAll these masks are **different** (uses VLSM - Variable Length Subnet Mask) ✓\n\n**Q8: Point-to-point link sizing**\n\nRouter-to-router connection needs:\nMinimum addresses: **4** (2 routers + network + broadcast = 4)\nSubnet mask: **/30** ✓\nBlock size: **4** (256 - 252)\nUsable IPs: **2** (routers at .1 and .2) ✓\nExample: 10.0.0.0/30 (routers at .1 and .2)\nExample: 10.0.0.4/30 (routers at .5 and .6)\n\n## PART 3: GLOBALTECH SCENARIO\n\n### Complex Real-World Implementation\n\n**Q9: GlobalTech HQ allocation**\n\nHQ: 10.0.0.0/16 needs to support 3000 hosts\nCalculation:\nNeed host bits: log2(3000+2) ≈ **12** bits\nTry /19: 2^13 = **8192** hosts ✓\nAllocation: 10.0.0.0/**/19** ✓\nNext available: 10.0.32.0/16 onwards (32 = 2^5, /19 borrowed 5 bits from /16)\n\n**Q10: GlobalTech regions allocation**\n\nAfter HQ uses 10.0.0.0/19, remaining: 10.0.32.0/19 onwards\n3 regions need equal allocation:\nBits needed for 3: 2^2 = 4 regions (enough)\nAllocate from remaining /19 space:\nRegion 1 (East): 10.0.32.0/21 (2048 hosts)\nRegion 2 (West): 10.0.40.0/21 (2048 hosts)\nRegion 3 (Central): 10.0.48.0/21 (2048 hosts)\n\nBetween Region 1 and 2:\n/21 block size: 2^(23-21) = 2^2 = **4** in 3rd octet ✓\nRegion 1: 10.0.32.0 to 10.0.39.255\nRegion 2: 10.0.40.0 to 10.0.47.255 ✓\n\n**Q11: GlobalTech branch offices**\n\n25 branch offices, each needs 100 hosts\n100 hosts = **/24** (size needed, provides 254 hosts)\nAvailable space after regions: 10.0.56.0/16 onwards\nPer branch: **/24** ✓\nNeed: 2^5 = **32** branches (25 branches fit in 32) ✓\n\nBranch allocation (/24 each):\nBranch 1: 10.0.56.0/24\nBranch 2: 10.0.57.0/24\nBranch 3: 10.0.58.0/24\n...\nBranch 25: 10.0.80.0/24 (56 + 24 = 80) ✓\n\n## PART 4: SEVEN-SECOND METHOD\n\n### Memorized Quick Reference\n\n**Q12: Memorized quick reference**\n\n| Mask Value | Block Size | Subnets | Usable Hosts |\n|-----------|-----------|---------|----------------|\n| /25: 128 | 128 | 2 | **126** ✓ |\n| /26: 192 | 64 | 4 | **62** ✓ |\n| /27: 224 | 32 | 8 | **30** ✓ |\n| /28: 240 | 16 | 16 | **14** ✓ |\n| /29: 248 | 8 | 32 | **6** ✓ |\n| /30: 252 | 4 | 64 | **2** ✓ (router links) |\n\n**Q13: Quick mask calculation**\n\nMask 255.255.255.224 (last octet = 224)\nBinary: 11100000\nCount 1s: **27** ones in /27 total (24 from first 3 octets + 3 in last)\nBlock: 256 - 224 = **32** ✓\nSubnets in /24: 256 / 32 = **8** ✓\nHosts: 32 - 2 = **30** ✓\n\n**Q14: Seven-second drill**\n\nGiven 192.168.1.0/24, subnet into 4 equal pieces:\nNeed **/26** (4 = 2^2, so borrow 2 bits) ✓\nMask: 255.255.255.**192** (192 = 11000000)\nBlock size: **64** ✓\nSubnet 1: 192.168.1.0/26\nSubnet 2: 192.168.1.64/26\nSubnet 3: 192.168.1.128/26\nSubnet 4: 192.168.1.192/26 ✓\n\n## PART 5: TROUBLESHOOTING\n\n### Common Mistakes and Solutions\n\n**Q15: Overlapping subnet detection**\n\nAdmin created:\nSubnet A: 172.16.0.0/24 (0.0 to 0.255)\nSubnet B: 172.16.0.128/25 (0.128 to 0.255)\nProblem: **Two** subnets **overlap** (overlap in 0.128-0.255) ⚠️\nSolution: Use either 172.16.0.0/24 and 172.16.1.0/24, OR\n         use 172.16.0.0/25 and 172.16.0.128/25 ✓\n\n**Q16: Insufficient space**\n\nNetwork 192.168.0.0/24 allocated as:\nDept A: 192.168.0.0/25 (126 hosts) ✓\nDept B: 192.168.0.128/25 (126 hosts) ✓\nNew Dept C needs 50 hosts: Problem = **No space available** ⚠️\nReason: **All** address space available (no room for third subnet)\nSolution: **Redesign** from larger network ✓\n\n**Q17: Asymmetric allocation**\n\nNeed: 300 hosts, 200 hosts, 50 hosts, 10 hosts\n/24 provides **254** hosts\n/25 provides **126** hosts\n/26 provides **62** hosts\n/27 provides **30** hosts\n/28 provides **14** hosts\n\nBest allocation (VLSM - right-size each):\nDept A: 300 → **/23** (/23 = 512) ✓\nDept B: 200 → **/24** (/24 = 256) ✓\nDept C: 50 → **/26** (/26 = 62) ✓\nDept D: 10 → **/28** (/28 = 14) ✓\n\n**Q18: Supernetting verification**\n\nFour /26 networks can be summarized:\n192.168.0.0/26\n192.168.0.64/26\n192.168.0.128/26\n192.168.0.192/26\nSummary route: 192.168.0.0/**/24** ✓\nReason: All fit in single /24 block ✓\n\n**Q19: Rapid calculation scenario**\n\nMerge 172.16.0.0/25 and 172.16.0.128/25 into one:\nCombined: 172.16.0.0/**/24** ✓\nWhy: Both /25s together = one /24 ✓\nHost count: **254** (126 + 126 + 2) ✓\n\n**Q20: Real-world complexity**\n\nISP has 203.0.113.0/24 for customers:\nLarge customer: 100 hosts (203.0.113.0/25)\nMedium customers: 30 hosts each (/26)\nSmall customers: 5 hosts each (/29)\n\nAllocate:\nLarge: 203.0.113.0/25 (0-127, 126 usable) ✓\nMedium 1: 203.0.113.128/26 (128-191) ✓\nMedium 2: 203.0.113.192/26 (192-223) ✓\nRemaining for small: 203.0.113.224-255\n/29 size: **8** addresses (can fit **3** small customers) ✓\n(224-231, 232-239, 240-247)",
  "hints": [
    "Binary method: Borrow bits from host portion using 2^n formula to get required subnets",
    "Step 1: Determine bits needed; Step 2: Calculate new prefix; Step 3: Convert to binary; Step 4: List subnets",
    "Block size = 256 - mask_value; determines spacing between subnets in rapid calculation",
    "To allocate subnets by host count, find minimum host bits needed: log2(hosts+2), round up",
    "/30 is special-case for point-to-point: only 4 addresses = 2 usable; used for router links",
    "VLSM = Variable Length Subnet Mask; allows different subnet sizes in same network for efficiency",
    "Memorize quick reference: /25(128 block), /26(64), /27(32), /28(16), /29(8), /30(4)",
    "Overlapping subnets = design error; verify addresses don't overlap before deploying",
    "Route summarization (supernetting): Multiple small subnets can often be advertised as one larger block",
    "Real-world networks rarely use fixed-length subnetting; VLSM with right-sized subnets is standard"
  ],
  "testCases": [
    {"id": "tc1-binary", "description": "Binary method", "input": "6 subnets", "expected": "3 bits, /27", "assert": "assert ('3' in solution or '27' in solution or 'borrow' in solution.lower())"},
    {"id": "tc2-complex", "description": "1000 subnets", "input": "172.16.0.0/16", "expected": "/26, 1024 subnets", "assert": "assert ('/26' in solution or '1024' in solution or '62' in solution)"},
    {"id": "tc3-hosts", "description": "Host count to subnet", "input": "100 hosts", "expected": "/25 or 126", "assert": "assert ('/25' in solution or '126' in solution or '100' in solution)"},
    {"id": "tc4-point", "description": "Point-to-point", "input": "/30", "expected": "4 addresses, 2 usable", "assert": "assert ('/30' in solution or '2' in solution or 'router' in solution.lower())"},
    {"id": "tc5-globaltech", "description": "HQ allocation", "input": "3000 hosts", "expected": "/19 or 8192", "assert": "assert ('/19' in solution or '8192' in solution or 'hq' in solution.lower())"},
    {"id": "tc6-regions", "description": "Regions block", "input": "3 regions", "expected": "4 block size", "assert": "assert ('4' in solution or '/21' in solution or 'region' in solution.lower())"},
    {"id": "tc7-branches", "description": "25 branches", "input": "100 hosts each", "expected": "/24, 32 fit", "assert": "assert ('/24' in solution or '32' in solution or 'branch' in solution.lower())"},
    {"id": "tc8-overlap", "description": "Overlapping subnets", "input": "/24 and /25", "expected": "Overlap error", "assert": "assert ('overlap' in solution.lower() or 'error' in solution.lower())"},
    {"id": "tc9-vlsm", "description": "VLSM right-sizing", "input": "300, 200, 50, 10", "expected": "/23, /24, /26, /28", "assert": "assert ('/23' in solution or '/24' in solution or 'vlsm' in solution.lower())"},
    {"id": "tc10-summary", "description": "Route summarization", "input": "Four /26 to /24", "expected": "Supernetting", "assert": "assert ('/24' in solution or 'summar' in solution.lower())"}
  ]
}