{
  "id": "exercise-138-defaultdict-counter",
  "lessonId": "lesson-128-defaultdict-counter",
  "title": "defaultdict and Counter Mastery",
  "description": "Master defaultdict for automatic default values and Counter for counting operations with efficient patterns.",
  "difficulty": "intermediate",
  "points": 20,
  "starterCode": "from collections import defaultdict, Counter\n\n# Function 1: Group items by category using defaultdict\ndef group_by_category(items):\n    \"\"\"Group items by their 'category' field.\n    \n    Args:\n        items (list): List of dicts like [{'name': 'apple', 'category': 'fruit'}, ...]\n    \n    Returns:\n        dict: Dictionary with category as key, list of items as value\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 2: Count word frequency\ndef count_words(text):\n    \"\"\"Count frequency of each word in text.\n    \n    Args:\n        text (str): Text to analyze\n    \n    Returns:\n        Counter: Word counts\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 3: Find most common elements\ndef top_n_items(items, n):\n    \"\"\"Find n most common items.\n    \n    Args:\n        items (list): List of items\n        n (int): Number of top items to return\n    \n    Returns:\n        list: List of (item, count) tuples\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 4: Build nested defaultdict\ndef create_nested_counter():\n    \"\"\"Create a nested defaultdict for counting.\n    \n    Returns:\n        defaultdict: Nested structure defaultdict(lambda: defaultdict(int))\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 5: Merge multiple Counters\ndef merge_counters(counters):\n    \"\"\"Merge multiple Counter objects.\n    \n    Args:\n        counters (list): List of Counter objects\n    \n    Returns:\n        Counter: Merged counts\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 6: Group and count by field\ndef count_by_field(items, field):\n    \"\"\"Count occurrences of each value in a field.\n    \n    Args:\n        items (list): List of dicts\n        field (str): Field name to count\n    \n    Returns:\n        Counter: Counts of each field value\n    \"\"\"\n    # Your code here\n    pass",
  "solution": "from collections import defaultdict, Counter\n\n# Function 1: Group items by category using defaultdict\ndef group_by_category(items):\n    \"\"\"Group items by their 'category' field.\n    \n    Args:\n        items (list): List of dicts like [{'name': 'apple', 'category': 'fruit'}, ...]\n    \n    Returns:\n        dict: Dictionary with category as key, list of items as value\n    \"\"\"\n    groups = defaultdict(list)\n    for item in items:\n        groups[item['category']].append(item)\n    return dict(groups)\n\n# Function 2: Count word frequency\ndef count_words(text):\n    \"\"\"Count frequency of each word in text.\n    \n    Args:\n        text (str): Text to analyze\n    \n    Returns:\n        Counter: Word counts\n    \"\"\"\n    words = text.lower().split()\n    return Counter(words)\n\n# Function 3: Find most common elements\ndef top_n_items(items, n):\n    \"\"\"Find n most common items.\n    \n    Args:\n        items (list): List of items\n        n (int): Number of top items to return\n    \n    Returns:\n        list: List of (item, count) tuples\n    \"\"\"\n    counter = Counter(items)\n    return counter.most_common(n)\n\n# Function 4: Build nested defaultdict\ndef create_nested_counter():\n    \"\"\"Create a nested defaultdict for counting.\n    \n    Returns:\n        defaultdict: Nested structure defaultdict(lambda: defaultdict(int))\n    \"\"\"\n    return defaultdict(lambda: defaultdict(int))\n\n# Function 5: Merge multiple Counters\ndef merge_counters(counters):\n    \"\"\"Merge multiple Counter objects.\n    \n    Args:\n        counters (list): List of Counter objects\n    \n    Returns:\n        Counter: Merged counts\n    \"\"\"\n    result = Counter()\n    for counter in counters:\n        result.update(counter)\n    return result\n\n# Function 6: Group and count by field\ndef count_by_field(items, field):\n    \"\"\"Count occurrences of each value in a field.\n    \n    Args:\n        items (list): List of dicts\n        field (str): Field name to count\n    \n    Returns:\n        Counter: Counts of each field value\n    \"\"\"\n    values = [item[field] for item in items if field in item]\n    return Counter(values)",
  "hints": [
    "defaultdict(list) automatically creates empty list for new keys",
    "Split text into words and use Counter(words) to count frequency",
    "Counter has .most_common(n) method to get top n items",
    "Use lambda to create nested defaultdict: defaultdict(lambda: defaultdict(int))",
    "Use result.update(counter) to merge Counters together",
    "Extract field values in list comprehension, then pass to Counter"
  ],
  "testCases": [
    {
      "id": "test1",
      "input": "group_by_category([{'name': 'apple', 'category': 'fruit'}, {'name': 'carrot', 'category': 'vegetable'}, {'name': 'banana', 'category': 'fruit'}])",
      "expectedOutput": "{'fruit': [{'name': 'apple', 'category': 'fruit'}, {'name': 'banana', 'category': 'fruit'}], 'vegetable': [{'name': 'carrot', 'category': 'vegetable'}]}",
      "isHidden": false,
      "description": "Group by category"
    },
    {
      "id": "test2",
      "input": "count_words('hello world hello')",
      "expectedOutput": "Counter({'hello': 2, 'world': 1})",
      "isHidden": false,
      "description": "Count words"
    },
    {
      "id": "test3",
      "input": "top_n_items(['a', 'b', 'a', 'c', 'a', 'b'], 2)",
      "expectedOutput": "[('a', 3), ('b', 2)]",
      "isHidden": false,
      "description": "Top 2 items"
    },
    {
      "id": "test4",
      "input": "nc = create_nested_counter(); nc['category']['item'] += 1; nc['category']['item']",
      "expectedOutput": "1",
      "isHidden": true,
      "description": "Nested counter usage"
    },
    {
      "id": "test5",
      "input": "merge_counters([Counter({'a': 1, 'b': 2}), Counter({'a': 2, 'c': 1})])",
      "expectedOutput": "Counter({'a': 3, 'b': 2, 'c': 1})",
      "isHidden": true,
      "description": "Merge counters"
    },
    {
      "id": "test6",
      "input": "count_by_field([{'color': 'red'}, {'color': 'blue'}, {'color': 'red'}], 'color')",
      "expectedOutput": "Counter({'red': 2, 'blue': 1})",
      "isHidden": true,
      "description": "Count by field"
    }
  ],
  "language": "python"
}