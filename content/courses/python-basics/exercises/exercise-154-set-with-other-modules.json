{
  "id": "exercise-154-set-with-other-modules",
  "lessonId": "lesson-144-set-with-other-modules",
  "title": "Sets with Standard Library Modules",
  "description": "Integrate sets with collections, itertools, functools: Counter sets, chain operations, reduce patterns.",
  "difficulty": "advanced",
  "points": 25,
  "starterCode": "from collections import Counter\nfrom itertools import chain\nfrom functools import reduce\n\n# Function 1: Counter to set conversion\ndef get_unique_elements(items):\n    \"\"\"Get unique elements using Counter.\n    \n    Args:\n        items (list): List with duplicates\n    \n    Returns:\n        set: Unique elements\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 2: Chain multiple sets\ndef merge_all_sets(sets_list):\n    \"\"\"Merge all sets using itertools.chain.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Merged set\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 3: Reduce with set union\ndef union_all(sets_list):\n    \"\"\"Union all sets using reduce.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Union of all sets\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 4: Filter with set membership\ndef filter_by_whitelist(items, whitelist):\n    \"\"\"Filter items using set whitelist.\n    \n    Args:\n        items (list): Items to filter\n        whitelist (set): Valid items\n    \n    Returns:\n        list: Filtered items\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 5: Set from Counter keys\ndef get_items_above_threshold(items, min_count):\n    \"\"\"Get items appearing at least min_count times.\n    \n    Args:\n        items (list): Items with duplicates\n        min_count (int): Minimum occurrence count\n    \n    Returns:\n        set: Items meeting threshold\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 6: Reduce with set intersection\ndef common_to_all(sets_list):\n    \"\"\"Find elements common to all sets.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Common elements\n    \"\"\"\n    # Your code here\n    pass",
  "solution": "from collections import Counter\nfrom itertools import chain\nfrom functools import reduce\n\n# Function 1: Counter to set conversion\ndef get_unique_elements(items):\n    \"\"\"Get unique elements using Counter.\n    \n    Args:\n        items (list): List with duplicates\n    \n    Returns:\n        set: Unique elements\n    \"\"\"\n    counter = Counter(items)\n    return set(counter.keys())\n\n# Function 2: Chain multiple sets\ndef merge_all_sets(sets_list):\n    \"\"\"Merge all sets using itertools.chain.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Merged set\n    \"\"\"\n    return set(chain.from_iterable(sets_list))\n\n# Function 3: Reduce with set union\ndef union_all(sets_list):\n    \"\"\"Union all sets using reduce.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Union of all sets\n    \"\"\"\n    if not sets_list:\n        return set()\n    return reduce(lambda a, b: a | b, sets_list)\n\n# Function 4: Filter with set membership\ndef filter_by_whitelist(items, whitelist):\n    \"\"\"Filter items using set whitelist.\n    \n    Args:\n        items (list): Items to filter\n        whitelist (set): Valid items\n    \n    Returns:\n        list: Filtered items\n    \"\"\"\n    return list(filter(lambda x: x in whitelist, items))\n\n# Function 5: Set from Counter keys\ndef get_items_above_threshold(items, min_count):\n    \"\"\"Get items appearing at least min_count times.\n    \n    Args:\n        items (list): Items with duplicates\n        min_count (int): Minimum occurrence count\n    \n    Returns:\n        set: Items meeting threshold\n    \"\"\"\n    counter = Counter(items)\n    return {item for item, count in counter.items() if count >= min_count}\n\n# Function 6: Reduce with set intersection\ndef common_to_all(sets_list):\n    \"\"\"Find elements common to all sets.\n    \n    Args:\n        sets_list (list): List of sets\n    \n    Returns:\n        set: Common elements\n    \"\"\"\n    if not sets_list:\n        return set()\n    return reduce(lambda a, b: a & b, sets_list)",
  "hints": [
    "Counter(items) creates counter, use set(counter.keys()) for unique elements",
    "Use chain.from_iterable(sets_list) to flatten, then set() to get unique",
    "reduce(lambda a, b: a | b, sets_list) applies union across all sets",
    "Use filter(lambda x: x in whitelist, items) for O(1) membership tests",
    "Counter with comprehension: {item for item, count in counter.items() if count >= min_count}",
    "reduce(lambda a, b: a & b, sets_list) applies intersection across all sets"
  ],
  "testCases": [
    {
      "id": "test1",
      "input": "get_unique_elements([1, 2, 2, 3, 3, 3])",
      "expectedOutput": "{1, 2, 3}",
      "isHidden": false,
      "description": "Get unique elements"
    },
    {
      "id": "test2",
      "input": "merge_all_sets([{1, 2}, {2, 3}, {3, 4}])",
      "expectedOutput": "{1, 2, 3, 4}",
      "isHidden": false,
      "description": "Merge all sets"
    },
    {
      "id": "test3",
      "input": "union_all([{1, 2}, {2, 3}, {3, 4}])",
      "expectedOutput": "{1, 2, 3, 4}",
      "isHidden": false,
      "description": "Union all"
    },
    {
      "id": "test4",
      "input": "filter_by_whitelist([1, 2, 3, 4, 5], {2, 4, 6})",
      "expectedOutput": "[2, 4]",
      "isHidden": true,
      "description": "Filter by whitelist"
    },
    {
      "id": "test5",
      "input": "get_items_above_threshold([1, 1, 2, 2, 2, 3], 2)",
      "expectedOutput": "{1, 2}",
      "isHidden": true,
      "description": "Items above threshold"
    },
    {
      "id": "test6",
      "input": "common_to_all([{1, 2, 3}, {2, 3, 4}, {2, 3, 5}])",
      "expectedOutput": "{2, 3}",
      "isHidden": true,
      "description": "Common to all"
    }
  ],
  "language": "python"
}