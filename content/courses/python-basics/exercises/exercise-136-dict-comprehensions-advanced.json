{
  "id": "exercise-136-dict-comprehensions-advanced",
  "lessonId": "lesson-126-dict-comprehensions-advanced",
  "title": "Advanced Dictionary Comprehensions",
  "description": "Master complex dictionary comprehensions, filtering, conditional expressions, nested comprehensions, and transformation patterns for efficient dict manipulation.",
  "difficulty": "advanced",
  "points": 25,
  "starterCode": "# Function 1: Filter dictionary with condition\ndef filter_dict(data, min_value):\n    \"\"\"Return new dict with only values greater than min_value.\n    \n    Args:\n        data (dict): Dictionary with numeric values\n        min_value (int or float): Minimum value threshold\n    \n    Returns:\n        dict: Filtered dictionary\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 2: Transform keys and values\ndef transform_dict(data):\n    \"\"\"Transform dict: uppercase keys, double values.\n    \n    Args:\n        data (dict): Dictionary with string keys and numeric values\n    \n    Returns:\n        dict: Dictionary with uppercase keys and doubled values\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 3: Conditional value transformation\ndef categorize_scores(scores):\n    \"\"\"Convert scores to categories: 'high' (>=90), 'medium' (>=70), 'low' (<70).\n    \n    Args:\n        scores (dict): Dictionary mapping names to scores\n    \n    Returns:\n        dict: Dictionary mapping names to categories\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 4: Flatten nested dictionary\ndef flatten_nested(nested):\n    \"\"\"Flatten one level: {outer: {inner: value}} -> {outer_inner: value}.\n    \n    Args:\n        nested (dict): Nested dictionary\n    \n    Returns:\n        dict: Flattened dictionary with composite keys\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 5: Group by property\ndef group_by_first_letter(words):\n    \"\"\"Group words by their first letter.\n    \n    Args:\n        words (list): List of words\n    \n    Returns:\n        dict: Dictionary mapping first letters to lists of words\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 6: Invert dictionary with duplicate handling\ndef invert_with_duplicates(data):\n    \"\"\"Invert dict, collecting all keys for duplicate values.\n    \n    Args:\n        data (dict): Original dictionary\n    \n    Returns:\n        dict: Inverted dict with values as lists of original keys\n    \"\"\"\n    # Your code here\n    pass",
  "solution": "from collections import defaultdict\n\n# Function 1: Filter dictionary with condition\ndef filter_dict(data, min_value):\n    \"\"\"Return new dict with only values greater than min_value.\n    \n    Args:\n        data (dict): Dictionary with numeric values\n        min_value (int or float): Minimum value threshold\n    \n    Returns:\n        dict: Filtered dictionary\n    \"\"\"\n    return {k: v for k, v in data.items() if v > min_value}\n\n# Function 2: Transform keys and values\ndef transform_dict(data):\n    \"\"\"Transform dict: uppercase keys, double values.\n    \n    Args:\n        data (dict): Dictionary with string keys and numeric values\n    \n    Returns:\n        dict: Dictionary with uppercase keys and doubled values\n    \"\"\"\n    return {k.upper(): v * 2 for k, v in data.items()}\n\n# Function 3: Conditional value transformation\ndef categorize_scores(scores):\n    \"\"\"Convert scores to categories: 'high' (>=90), 'medium' (>=70), 'low' (<70).\n    \n    Args:\n        scores (dict): Dictionary mapping names to scores\n    \n    Returns:\n        dict: Dictionary mapping names to categories\n    \"\"\"\n    return {\n        name: 'high' if score >= 90 else 'medium' if score >= 70 else 'low'\n        for name, score in scores.items()\n    }\n\n# Function 4: Flatten nested dictionary\ndef flatten_nested(nested):\n    \"\"\"Flatten one level: {outer: {inner: value}} -> {outer_inner: value}.\n    \n    Args:\n        nested (dict): Nested dictionary\n    \n    Returns:\n        dict: Flattened dictionary with composite keys\n    \"\"\"\n    return {\n        f\"{outer}_{inner}\": value\n        for outer, inner_dict in nested.items()\n        for inner, value in inner_dict.items()\n    }\n\n# Function 5: Group by property\ndef group_by_first_letter(words):\n    \"\"\"Group words by their first letter.\n    \n    Args:\n        words (list): List of words\n    \n    Returns:\n        dict: Dictionary mapping first letters to lists of words\n    \"\"\"\n    groups = defaultdict(list)\n    for word in words:\n        groups[word[0]].append(word)\n    return dict(groups)\n\n# Function 6: Invert dictionary with duplicate handling\ndef invert_with_duplicates(data):\n    \"\"\"Invert dict, collecting all keys for duplicate values.\n    \n    Args:\n        data (dict): Original dictionary\n    \n    Returns:\n        dict: Inverted dict with values as lists of original keys\n    \"\"\"\n    inverted = defaultdict(list)\n    for key, value in data.items():\n        inverted[value].append(key)\n    return dict(inverted)",
  "hints": [
    "Filter comprehension: {k: v for k, v in d.items() if condition}",
    "Transform both key and value: {k.upper(): v * 2 for k, v in d.items()}",
    "Conditional expression: 'high' if score >= 90 else 'medium' if score >= 70 else 'low'",
    "Nested comprehension: {f'{o}_{i}': val for o, inner in nested.items() for i, val in inner.items()}",
    "Use defaultdict(list) to group items by a key property",
    "For inversion with duplicates, use defaultdict(list) and append all keys for each value"
  ],
  "testCases": [
    {
      "id": "test1",
      "input": "filter_dict({'a': 10, 'b': 20, 'c': 5}, 8)",
      "expectedOutput": "{'a': 10, 'b': 20}",
      "isHidden": false,
      "description": "Filter dictionary"
    },
    {
      "id": "test2",
      "input": "transform_dict({'a': 1, 'b': 2})",
      "expectedOutput": "{'A': 2, 'B': 4}",
      "isHidden": false,
      "description": "Transform keys and values"
    },
    {
      "id": "test3",
      "input": "categorize_scores({'alice': 95, 'bob': 75, 'charlie': 65})",
      "expectedOutput": "{'alice': 'high', 'bob': 'medium', 'charlie': 'low'}",
      "isHidden": false,
      "description": "Categorize scores"
    },
    {
      "id": "test4",
      "input": "flatten_nested({'a': {'x': 1, 'y': 2}, 'b': {'z': 3}})",
      "expectedOutput": "{'a_x': 1, 'a_y': 2, 'b_z': 3}",
      "isHidden": true,
      "description": "Flatten nested dict"
    },
    {
      "id": "test5",
      "input": "group_by_first_letter(['apple', 'banana', 'apricot', 'cherry'])",
      "expectedOutput": "{'a': ['apple', 'apricot'], 'b': ['banana'], 'c': ['cherry']}",
      "isHidden": true,
      "description": "Group by first letter"
    },
    {
      "id": "test6",
      "input": "invert_with_duplicates({'a': 1, 'b': 2, 'c': 1})",
      "expectedOutput": "{1: ['a', 'c'], 2: ['b']}",
      "isHidden": true,
      "description": "Invert with duplicates"
    }
  ],
  "language": "python"
}