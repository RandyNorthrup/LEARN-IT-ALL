{
  "id": "exercise-067-recursion-basics",
  "lessonId": "lesson-053-recursion-basics",
  "title": "Recursive Function Patterns",
  "description": "Master recursion fundamentals: base cases, recursive cases, and solving problems with self-referencing functions.\n\nYour program should:\n1. Identify base and recursive cases\n2. Implement factorial and fibonacci recursively\n3. Process lists and strings recursively\n4. Calculate sums and products recursively\n5. Understand recursion call stack\n6. Avoid infinite recursion\n\nImplement these functions:\n- `factorial(n)`: Calculate n! recursively\n- `fibonacci(n)`: Generate nth Fibonacci number\n- `sum_recursive(numbers)`: Sum list recursively\n- `countdown(n)`: Count down from n to 1\n- `power(base, exp)`: Calculate base^exp recursively\n- `reverse_string(s)`: Reverse string recursively\n\nExample:\n```python\nfactorial(5)  # 120 (5 * 4 * 3 * 2 * 1)\nfibonacci(6)  # 8 (0,1,1,2,3,5,8)\n```",
  "difficulty": "intermediate",
  "points": 20,
  "language": "python",
  "starterCode": "def factorial(n):\n    \"\"\"Calculate factorial of n recursively.\n    \n    Args:\n        n: Non-negative integer.\n    \n    Returns:\n        n! (factorial of n).\n    \"\"\"\n    # TODO: Implement recursion\n    # Base case: n == 0 or n == 1 returns 1\n    # Recursive case: n * factorial(n-1)\n    \n    # if n == 0 or n == 1:\n    #     return 1\n    # return n * factorial(n - 1)\n    \n    pass\n\ndef fibonacci(n):\n    \"\"\"Return the nth Fibonacci number.\n    \n    Fibonacci sequence: 0, 1, 1, 2, 3, 5, 8, 13...\n    \n    Args:\n        n: Index in Fibonacci sequence (0-indexed).\n    \n    Returns:\n        The nth Fibonacci number.\n    \"\"\"\n    # TODO: Implement recursion\n    # Base cases: n == 0 returns 0, n == 1 returns 1\n    # Recursive case: fibonacci(n-1) + fibonacci(n-2)\n    \n    # if n <= 0:\n    #     return 0\n    # if n == 1:\n    #     return 1\n    # return fibonacci(n - 1) + fibonacci(n - 2)\n    \n    pass\n\ndef sum_recursive(numbers):\n    \"\"\"Sum all numbers in list recursively.\n    \n    Args:\n        numbers: List of numbers.\n    \n    Returns:\n        Sum of all numbers.\n    \"\"\"\n    # TODO: Implement recursion\n    # Base case: empty list returns 0\n    # Recursive case: first element + sum of rest\n    \n    # if not numbers:\n    #     return 0\n    # return numbers[0] + sum_recursive(numbers[1:])\n    \n    pass\n\ndef countdown(n):\n    \"\"\"Print countdown from n to 1.\n    \n    Args:\n        n: Starting number.\n    \n    Returns:\n        List of countdown numbers.\n    \"\"\"\n    # TODO: Implement recursion\n    # Base case: n <= 0 returns empty list\n    # Recursive case: [n] + countdown(n-1)\n    \n    # if n <= 0:\n    #     return []\n    # return [n] + countdown(n - 1)\n    \n    pass\n\ndef power(base, exp):\n    \"\"\"Calculate base^exp recursively.\n    \n    Args:\n        base: Base number.\n        exp: Exponent (non-negative integer).\n    \n    Returns:\n        base raised to power of exp.\n    \"\"\"\n    # TODO: Implement recursion\n    # Base case: exp == 0 returns 1\n    # Recursive case: base * power(base, exp-1)\n    \n    # if exp == 0:\n    #     return 1\n    # return base * power(base, exp - 1)\n    \n    pass\n\ndef reverse_string(s):\n    \"\"\"Reverse string recursively.\n    \n    Args:\n        s: String to reverse.\n    \n    Returns:\n        Reversed string.\n    \"\"\"\n    # TODO: Implement recursion\n    # Base case: empty or single char returns as-is\n    # Recursive case: last char + reverse of rest\n    \n    # if len(s) <= 1:\n    #     return s\n    # return s[-1] + reverse_string(s[:-1])\n    \n    pass\n\n# Test functions\nprint(\"Factorial:\")\nprint(\"=\"*60)\nfor n in [0, 1, 5, 7]:\n    result = factorial(n)\n    print(f\"factorial({n}): {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Fibonacci Sequence:\")\nprint(\"=\"*60)\nprint(\"Index: 0  1  2  3  4  5  6  7  8\")\nprint(\"Value: \", end=\"\")\nfor i in range(9):\n    print(f\"{fibonacci(i):2} \", end=\"\")\nprint(\"\\n\")\n\nfor n in [5, 7, 10]:\n    result = fibonacci(n)\n    print(f\"fibonacci({n}): {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Recursive Sum:\")\nprint(\"=\"*60)\ntest_lists = [\n    [1, 2, 3, 4, 5],\n    [10, 20, 30],\n    [100],\n    [],\n]\n\nfor numbers in test_lists:\n    result = sum_recursive(numbers)\n    print(f\"sum_recursive({numbers}): {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Countdown:\")\nprint(\"=\"*60)\nfor n in [5, 3, 1]:\n    result = countdown(n)\n    print(f\"countdown({n}): {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Power Function:\")\nprint(\"=\"*60)\ntest_cases = [\n    (2, 0),\n    (2, 3),\n    (5, 2),\n    (3, 4),\n]\n\nfor base, exp in test_cases:\n    result = power(base, exp)\n    print(f\"power({base}, {exp}): {result} (expected: {base**exp})\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Reverse String:\")\nprint(\"=\"*60)\ntest_strings = [\n    \"hello\",\n    \"python\",\n    \"racecar\",\n    \"a\",\n    \"\",\n]\n\nfor s in test_strings:\n    result = reverse_string(s)\n    print(f\"reverse_string('{s}'): '{result}'\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Recursion Key Concepts:\")\nprint(\"=\"*60)\nprint(\"1. Base case: When to STOP recursing\")\nprint(\"2. Recursive case: Break problem into smaller version\")\nprint(\"3. Progress toward base case: Must get simpler\")\nprint(\"4. Call stack: Each call waits for nested calls\")\nprint(\"5. Avoid infinite recursion: Always have base case\")\nprint(\"\\nRecursion breakdown for factorial(5):\")\nprint(\"  factorial(5) = 5 * factorial(4)\")\nprint(\"               = 5 * (4 * factorial(3))\")\nprint(\"               = 5 * (4 * (3 * factorial(2)))\")\nprint(\"               = 5 * (4 * (3 * (2 * factorial(1))))\")\nprint(\"               = 5 * (4 * (3 * (2 * 1)))\")\nprint(\"               = 120\")",
  "solution": "def factorial(n):\n    \"\"\"Calculate factorial of n recursively.\n    \n    Args:\n        n: Non-negative integer.\n    \n    Returns:\n        n! (factorial of n).\n    \"\"\"\n    if n == 0 or n == 1:\n        return 1\n    return n * factorial(n - 1)\n\ndef fibonacci(n):\n    \"\"\"Return the nth Fibonacci number.\n    \n    Fibonacci sequence: 0, 1, 1, 2, 3, 5, 8, 13...\n    \n    Args:\n        n: Index in Fibonacci sequence (0-indexed).\n    \n    Returns:\n        The nth Fibonacci number.\n    \"\"\"\n    if n <= 0:\n        return 0\n    if n == 1:\n        return 1\n    return fibonacci(n - 1) + fibonacci(n - 2)\n\ndef sum_recursive(numbers):\n    \"\"\"Sum all numbers in list recursively.\n    \n    Args:\n        numbers: List of numbers.\n    \n    Returns:\n        Sum of all numbers.\n    \"\"\"\n    if not numbers:\n        return 0\n    return numbers[0] + sum_recursive(numbers[1:])\n\ndef countdown(n):\n    \"\"\"Print countdown from n to 1.\n    \n    Args:\n        n: Starting number.\n    \n    Returns:\n        List of countdown numbers.\n    \"\"\"\n    if n <= 0:\n        return []\n    return [n] + countdown(n - 1)\n\ndef power(base, exp):\n    \"\"\"Calculate base^exp recursively.\n    \n    Args:\n        base: Base number.\n        exp: Exponent (non-negative integer).\n    \n    Returns:\n        base raised to power of exp.\n    \"\"\"\n    if exp == 0:\n        return 1\n    return base * power(base, exp - 1)\n\ndef reverse_string(s):\n    \"\"\"Reverse string recursively.\n    \n    Args:\n        s: String to reverse.\n    \n    Returns:\n        Reversed string.\n    \"\"\"\n    if len(s) <= 1:\n        return s\n    return s[-1] + reverse_string(s[:-1])\n\n# Test code as provided",
  "hints": [
    "Every recursive function needs a base case (when to stop)",
    "Base case for factorial: n == 0 or n == 1 returns 1",
    "Fibonacci base cases: n <= 0 returns 0, n == 1 returns 1",
    "List recursion: process first element + recurse on rest",
    "Power recursion: base * power(base, exp-1)",
    "String reversal: last character + reverse of remaining"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Factorial of 5",
      "input": "factorial(5)",
      "expectedOutput": "120",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Fibonacci of 7",
      "input": "fibonacci(7)",
      "expectedOutput": "13",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Recursive sum",
      "input": "sum_recursive([1, 2, 3, 4])",
      "expectedOutput": "10",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Countdown from 3",
      "input": "countdown(3)",
      "expectedOutput": "[3, 2, 1]",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Power calculation",
      "input": "power(2, 5)",
      "expectedOutput": "32",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Reverse string",
      "input": "reverse_string('python')",
      "expectedOutput": "'nohtyp'",
      "isHidden": true
    }
  ]
}