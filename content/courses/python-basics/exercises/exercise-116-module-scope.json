{
  "id": "exercise-116-module-scope",
  "lessonId": "lesson-106-module-scope",
  "title": "Module-Level Scope and Import Mechanics",
  "description": "Master module-level scope and understand how imports create namespaces. Learn about module variables and shared state.\n\nYour program should:\n1. Understand module-level variable scope\n2. Know how imports create namespaces\n3. Handle module-level constants and configuration\n4. Understand shared state across imports\n5. Use module variables appropriately\n6. Avoid module scope pitfalls\n\nImplement these functions:\n- `get_module_constant()`: Access module constant\n- `modify_module_state()`: Change module-level variable\n- `module_config_pattern()`: Configuration dictionary\n- `shared_state_demo()`: Show shared state behavior\n- `module_namespace_info()`: Inspect module namespace\n- `module_initialization()`: Module-level setup\n\nExample:\n```python\nget_module_constant()  # Returns MODULE_VERSION\n```",
  "difficulty": "intermediate",
  "points": 20,
  "language": "python",
  "starterCode": "# Module-level constants (configuration)\nMODULE_VERSION = \"1.0.0\"\nMAX_CONNECTIONS = 100\nDEBUG = False\n\n# Module-level variable (state)\nconnection_count = 0\n\n# Module-level configuration dictionary\nconfig = {\n    'timeout': 30,\n    'retries': 3,\n    'base_url': 'https://api.example.com'\n}\n\ndef get_module_constant():\n    \"\"\"Access module-level constant.\n    \n    Returns:\n        MODULE_VERSION string.\n    \"\"\"\n    # TODO: Return module constant\n    # return MODULE_VERSION\n    \n    pass\n\ndef modify_module_state():\n    \"\"\"Modify module-level state.\n    \n    Returns:\n        New connection count.\n    \"\"\"\n    # TODO: Increment module-level variable\n    # global connection_count\n    # connection_count += 1\n    # return connection_count\n    \n    pass\n\ndef module_config_pattern():\n    \"\"\"Access module configuration.\n    \n    Returns:\n        Config dictionary.\n    \"\"\"\n    # TODO: Return config (no global needed for reading)\n    # return config\n    \n    pass\n\ndef shared_state_demo():\n    \"\"\"Demonstrate shared module state.\n    \n    Returns:\n        Dict showing state sharing.\n    \"\"\"\n    # TODO: Module variables shared across all imports\n    # global connection_count\n    # connection_count += 1\n    # return {\n    #     'count': connection_count,\n    #     'shared': 'All imports see same value'\n    # }\n    \n    pass\n\ndef module_namespace_info():\n    \"\"\"Inspect module namespace.\n    \n    Returns:\n        Dict with namespace info.\n    \"\"\"\n    # TODO: Show what's in module namespace\n    # return {\n    #     'has_version': 'MODULE_VERSION' in globals(),\n    #     'has_config': 'config' in globals(),\n    #     'has_connection_count': 'connection_count' in globals()\n    # }\n    \n    pass\n\ndef module_initialization():\n    \"\"\"Module-level initialization pattern.\n    \n    Returns:\n        Initialization message.\n    \"\"\"\n    # TODO: Common pattern for module setup\n    # if not hasattr(module_initialization, 'initialized'):\n    #     module_initialization.initialized = True\n    #     return \"Module initialized\"\n    # return \"Already initialized\"\n    \n    pass\n\n# Test functions\nprint(\"Module-Level Scope:\")\nprint(\"=\"*60)\n\nprint(\"\\nModule Constants:\")\nprint(\"-\"*60)\nprint(f\"MODULE_VERSION: {MODULE_VERSION}\")\nprint(f\"MAX_CONNECTIONS: {MAX_CONNECTIONS}\")\nprint(f\"DEBUG: {DEBUG}\")\nprint(f\"get_module_constant(): {get_module_constant()}\")\nprint(\"Constants defined at module level\")\n\nprint(\"\\nModule State:\")\nprint(\"-\"*60)\nprint(f\"Initial connection_count: {connection_count}\")\nprint(f\"modify_module_state(): {modify_module_state()}\")\nprint(f\"modify_module_state(): {modify_module_state()}\")\nprint(f\"Current connection_count: {connection_count}\")\nprint(\"State persists across function calls\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Module Configuration Pattern:\")\nprint(\"=\"*60)\nmodule_config = module_config_pattern()\nprint(f\"Config: {module_config}\")\nprint(f\"Timeout: {module_config['timeout']}\")\nprint(f\"Retries: {module_config['retries']}\")\nprint(\"Dict pattern for grouped configuration\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Shared State Across Imports:\")\nprint(\"=\"*60)\nresult = shared_state_demo()\nprint(f\"Count: {result['count']}\")\nprint(f\"Info: {result['shared']}\")\nresult = shared_state_demo()\nprint(f\"Count: {result['count']}\")\nprint(\"All imports of this module see same state\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Module Namespace Inspection:\")\nprint(\"=\"*60)\nnamespace = module_namespace_info()\nfor key, value in namespace.items():\n    print(f\"{key}: {value}\")\nprint(\"globals() shows module-level names\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Module Initialization:\")\nprint(\"=\"*60)\nprint(f\"First call: {module_initialization()}\")\nprint(f\"Second call: {module_initialization()}\")\nprint(\"One-time initialization pattern\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Key Concepts:\")\nprint(\"=\"*60)\nprint(\"1. Module scope: File/module level\")\nprint(\"2. Import creates namespace: module.variable\")\nprint(\"3. Constants: UPPERCASE convention\")\nprint(\"4. Configuration: Dict pattern common\")\nprint(\"5. Shared state: All imports see same values\")\nprint(\"6. Module variables: Persist across calls\")\nprint(\"\\nModule-Level Uses:\")\nprint(\"  - Configuration/constants\")\nprint(\"  - Cached/computed values\")\nprint(\"  - Connection pools\")\nprint(\"  - Singleton pattern\")\nprint(\"  - Module initialization\")\nprint(\"\\nImport Mechanics:\")\nprint(\"  import module -> module.name\")\nprint(\"  from module import name -> name\")\nprint(\"  Module code runs once on first import\")",
  "solution": "# Module-level constants\nMODULE_VERSION = \"1.0.0\"\nMAX_CONNECTIONS = 100\nDEBUG = False\nconnection_count = 0\nconfig = {\n    'timeout': 30,\n    'retries': 3,\n    'base_url': 'https://api.example.com'\n}\n\ndef get_module_constant():\n    \"\"\"Access module-level constant.\"\"\"\n    return MODULE_VERSION\n\ndef modify_module_state():\n    \"\"\"Modify module-level state.\"\"\"\n    global connection_count\n    connection_count += 1\n    return connection_count\n\ndef module_config_pattern():\n    \"\"\"Access module configuration.\"\"\"\n    return config\n\ndef shared_state_demo():\n    \"\"\"Demonstrate shared module state.\"\"\"\n    global connection_count\n    connection_count += 1\n    return {\n        'count': connection_count,\n        'shared': 'All imports see same value'\n    }\n\ndef module_namespace_info():\n    \"\"\"Inspect module namespace.\"\"\"\n    return {\n        'has_version': 'MODULE_VERSION' in globals(),\n        'has_config': 'config' in globals(),\n        'has_connection_count': 'connection_count' in globals()\n    }\n\ndef module_initialization():\n    \"\"\"Module-level initialization pattern.\"\"\"\n    if not hasattr(module_initialization, 'initialized'):\n        module_initialization.initialized = True\n        return \"Module initialized\"\n    return \"Already initialized\"\n\n# Test code as provided",
  "hints": [
    "Module scope: Variables at file/module level",
    "Constants: UPPERCASE names for configuration values",
    "Import creates namespace: module.variable access",
    "Shared state: Module variables shared across all imports",
    "globals() shows module-level variables",
    "Module code runs once on first import"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Module constant access",
      "input": "get_module_constant()",
      "expectedOutput": "'1.0.0'",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Module state modification",
      "input": "cc = connection_count; modify_module_state(); connection_count > cc",
      "expectedOutput": "True",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Config pattern",
      "input": "module_config_pattern()['timeout']",
      "expectedOutput": "30",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Shared state",
      "input": "'shared' in shared_state_demo()",
      "expectedOutput": "True",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Namespace inspection",
      "input": "module_namespace_info()['has_version']",
      "expectedOutput": "True",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Initialization pattern",
      "input": "'initialized' in module_initialization()",
      "expectedOutput": "True",
      "isHidden": true
    }
  ]
}