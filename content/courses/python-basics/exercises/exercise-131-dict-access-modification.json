{
  "id": "exercise-131-dict-access-modification",
  "lessonId": "lesson-121-dict-access-modification",
  "title": "Dictionary Access and Modification",
  "description": "Learn safe dictionary access patterns with get(), setdefault(), and proper modification techniques. Master handling missing keys and updating values.",
  "difficulty": "intermediate",
  "points": 20,
  "starterCode": "# Function 1: Safe nested dictionary access\ndef safe_nested_get(data, key1, key2, default=None):\n    \"\"\"Safely access nested dictionary value with default.\n    \n    Args:\n        data (dict): Nested dictionary\n        key1 (str): First level key\n        key2 (str): Second level key\n        default (any, optional): Default value if keys don't exist\n    \n    Returns:\n        any: Nested value or default\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 2: Update or add value\ndef update_score(scores, name, points_to_add):\n    \"\"\"Add points to a player's score, creating entry if doesn't exist.\n    \n    Args:\n        scores (dict): Dictionary of player scores\n        name (str): Player name\n        points_to_add (int): Points to add\n    \n    Returns:\n        dict: Updated scores dictionary\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 3: Remove key with default return\ndef remove_with_default(data, key, default=None):\n    \"\"\"Remove a key and return its value, or default if key doesn't exist.\n    \n    Args:\n        data (dict): Dictionary to modify\n        key (str): Key to remove\n        default (any, optional): Default return value\n    \n    Returns:\n        any: Removed value or default\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 4: Batch update dictionary\ndef batch_update(original, updates):\n    \"\"\"Apply multiple updates to a dictionary.\n    \n    Args:\n        original (dict): Original dictionary\n        updates (dict): Dictionary of updates to apply\n    \n    Returns:\n        dict: Updated dictionary (modify in place)\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 5: Increment counter safely\ndef increment_counter(counters, key, amount=1):\n    \"\"\"Increment a counter, initializing to 0 if doesn't exist.\n    \n    Args:\n        counters (dict): Dictionary of counters\n        key (str): Counter key\n        amount (int, optional): Amount to increment. Defaults to 1.\n    \n    Returns:\n        dict: Updated counters dictionary\n    \"\"\"\n    # Your code here\n    pass\n\n# Function 6: Build nested structure with setdefault\ndef group_by_category(items):\n    \"\"\"Group items by their category into lists.\n    \n    Args:\n        items (list): List of (category, item) tuples\n    \n    Returns:\n        dict: Dictionary mapping categories to lists of items\n    \"\"\"\n    # Your code here\n    pass",
  "solution": "# Function 1: Safe nested dictionary access\ndef safe_nested_get(data, key1, key2, default=None):\n    \"\"\"Safely access nested dictionary value with default.\n    \n    Args:\n        data (dict): Nested dictionary\n        key1 (str): First level key\n        key2 (str): Second level key\n        default (any, optional): Default value if keys don't exist\n    \n    Returns:\n        any: Nested value or default\n    \"\"\"\n    return data.get(key1, {}).get(key2, default)\n\n# Function 2: Update or add value\ndef update_score(scores, name, points_to_add):\n    \"\"\"Add points to a player's score, creating entry if doesn't exist.\n    \n    Args:\n        scores (dict): Dictionary of player scores\n        name (str): Player name\n        points_to_add (int): Points to add\n    \n    Returns:\n        dict: Updated scores dictionary\n    \"\"\"\n    scores[name] = scores.get(name, 0) + points_to_add\n    return scores\n\n# Function 3: Remove key with default return\ndef remove_with_default(data, key, default=None):\n    \"\"\"Remove a key and return its value, or default if key doesn't exist.\n    \n    Args:\n        data (dict): Dictionary to modify\n        key (str): Key to remove\n        default (any, optional): Default return value\n    \n    Returns:\n        any: Removed value or default\n    \"\"\"\n    return data.pop(key, default)\n\n# Function 4: Batch update dictionary\ndef batch_update(original, updates):\n    \"\"\"Apply multiple updates to a dictionary.\n    \n    Args:\n        original (dict): Original dictionary\n        updates (dict): Dictionary of updates to apply\n    \n    Returns:\n        dict: Updated dictionary (modify in place)\n    \"\"\"\n    original.update(updates)\n    return original\n\n# Function 5: Increment counter safely\ndef increment_counter(counters, key, amount=1):\n    \"\"\"Increment a counter, initializing to 0 if doesn't exist.\n    \n    Args:\n        counters (dict): Dictionary of counters\n        key (str): Counter key\n        amount (int, optional): Amount to increment. Defaults to 1.\n    \n    Returns:\n        dict: Updated counters dictionary\n    \"\"\"\n    counters[key] = counters.get(key, 0) + amount\n    return counters\n\n# Function 6: Build nested structure with setdefault\ndef group_by_category(items):\n    \"\"\"Group items by their category into lists.\n    \n    Args:\n        items (list): List of (category, item) tuples\n    \n    Returns:\n        dict: Dictionary mapping categories to lists of items\n    \"\"\"\n    groups = {}\n    for category, item in items:\n        groups.setdefault(category, []).append(item)\n    return groups",
  "hints": [
    "Chain .get() calls with {} as default: data.get(key1, {}).get(key2, default)",
    "Use scores.get(name, 0) to get current score or 0 if player doesn't exist",
    "The .pop(key, default) method removes and returns the value, or default if key is missing",
    "The .update() method merges dictionaries, with later values overriding earlier ones",
    "Pattern for safe increment: counters[key] = counters.get(key, 0) + amount",
    "setdefault(key, []) returns existing list or creates new empty list, then you can .append()"
  ],
  "testCases": [
    {
      "id": "test1",
      "input": "safe_nested_get({'user': {'name': 'Alice'}}, 'user', 'name', 'Unknown')",
      "expectedOutput": "'Alice'",
      "isHidden": false,
      "description": "Safe nested access - value exists"
    },
    {
      "id": "test2",
      "input": "safe_nested_get({'user': {}}, 'user', 'email', 'no-email')",
      "expectedOutput": "'no-email'",
      "isHidden": false,
      "description": "Safe nested access - missing key"
    },
    {
      "id": "test3",
      "input": "update_score({'alice': 100}, 'alice', 10)",
      "expectedOutput": "{'alice': 110}",
      "isHidden": false,
      "description": "Update existing score"
    },
    {
      "id": "test4",
      "input": "remove_with_default({'a': 1, 'b': 2}, 'a', 0)",
      "expectedOutput": "1",
      "isHidden": true,
      "description": "Remove existing key"
    },
    {
      "id": "test5",
      "input": "increment_counter({}, 'clicks', 5)",
      "expectedOutput": "{'clicks': 5}",
      "isHidden": true,
      "description": "Increment new counter"
    },
    {
      "id": "test6",
      "input": "group_by_category([('fruit', 'apple'), ('veg', 'carrot'), ('fruit', 'banana')])",
      "expectedOutput": "{'fruit': ['apple', 'banana'], 'veg': ['carrot']}",
      "isHidden": true,
      "description": "Group items by category"
    }
  ],
  "language": "python"
}