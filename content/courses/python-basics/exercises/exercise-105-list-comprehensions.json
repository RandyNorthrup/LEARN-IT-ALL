{
  "id": "exercise-105-list-comprehensions",
  "lessonId": "lesson-096-list-comprehensions",
  "title": "List Comprehensions Mastery",
  "description": "Master list comprehensions for concise, efficient list creation and transformation.\n\nYour program should:\n1. Create lists with basic comprehension syntax\n2. Filter lists with conditional comprehensions\n3. Use if-else expressions in comprehensions\n4. Work with nested comprehensions\n5. Combine multiple iterables with zip\n6. Choose when to use comprehensions vs loops\n\nImplement these functions:\n- `basic_comprehensions()`: Transform and create lists\n- `filtered_comprehensions()`: Filter with conditions\n- `ifelse_comprehensions()`: Use if-else expressions\n- `nested_comprehensions()`: Flatten and create 2D lists\n- `multiple_iterables()`: Combine with zip\n- `comprehension_vs_loop()`: Compare approaches\n\nExample:\n```python\n[x**2 for x in range(5)]  # Squares\n[x for x in nums if x > 0]  # Filter\n```",
  "difficulty": "intermediate",
  "points": 20,
  "language": "python",
  "starterCode": "def basic_comprehensions():\n    \"\"\"Basic list comprehension syntax.\n    \n    Returns:\n        Dict with comprehension results.\n    \"\"\"\n    # TODO: Basic comprehensions\n    # squares = [x**2 for x in range(5)]\n    # doubled = [x * 2 for x in [1, 2, 3, 4, 5]]\n    # upper = [s.upper() for s in [\"hello\", \"world\"]]\n    # lengths = [len(word) for word in [\"hi\", \"hello\", \"hey\"]]\n    # first_chars = [name[0] for name in [\"Alice\", \"Bob\", \"Charlie\"]]\n    # from_range = [x for x in range(10, 15)]\n    # \n    # return {\n    #     'squares': squares,\n    #     'doubled': doubled,\n    #     'upper': upper,\n    #     'lengths': lengths,\n    #     'first_chars': first_chars,\n    #     'from_range': from_range\n    # }\n    pass\n\ndef filtered_comprehensions():\n    \"\"\"Filter with conditions.\n    \n    Returns:\n        Dict with filtered results.\n    \"\"\"\n    # TODO: Filtered comprehensions\n    # numbers = list(range(20))\n    # evens = [x for x in numbers if x % 2 == 0]\n    # odds = [x for x in numbers if x % 2 != 0]\n    # greater_than_10 = [x for x in numbers if x > 10]\n    # \n    # words = [\"hi\", \"hello\", \"world\", \"python\", \"code\"]\n    # long_words = [w for w in words if len(w) > 4]\n    # starts_with_h = [w for w in words if w.startswith('h')]\n    # \n    # # Combined filter and transform\n    # even_squares = [x**2 for x in range(10) if x % 2 == 0]\n    # \n    # return {\n    #     'evens': evens,\n    #     'odds': odds,\n    #     'greater_than_10': greater_than_10,\n    #     'long_words': long_words,\n    #     'starts_with_h': starts_with_h,\n    #     'even_squares': even_squares\n    # }\n    pass\n\ndef ifelse_comprehensions():\n    \"\"\"Use if-else in comprehensions.\n    \n    Returns:\n        Dict with if-else results.\n    \"\"\"\n    # TODO: If-else comprehensions\n    # numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n    # labels = [\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n    # \n    # # Absolute values\n    # values = [-2, -1, 0, 1, 2]\n    # absolute = [x if x >= 0 else -x for x in values]\n    # \n    # # Cap values\n    # scores = [85, 105, 92, 110, 78]\n    # capped = [s if s <= 100 else 100 for s in scores]\n    # \n    # # Pass/Fail\n    # grades = [85, 92, 58, 73, 45, 90]\n    # results = [\"Pass\" if g >= 60 else \"Fail\" for g in grades]\n    # \n    # return {\n    #     'labels': labels,\n    #     'absolute': absolute,\n    #     'capped': capped,\n    #     'results': results\n    # }\n    pass\n\ndef nested_comprehensions():\n    \"\"\"Nested list comprehensions.\n    \n    Returns:\n        Dict with nested results.\n    \"\"\"\n    # TODO: Nested comprehensions\n    # # Create 2D matrix\n    # matrix = [[i * j for j in range(3)] for i in range(3)]\n    # \n    # # Flatten nested list\n    # nested = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n    # flattened = [num for row in nested for num in row]\n    # \n    # # Filter nested list\n    # evens_only = [num for row in nested for num in row if num % 2 == 0]\n    # \n    # # Cartesian product\n    # colors = [\"red\", \"blue\"]\n    # sizes = [\"S\", \"M\", \"L\"]\n    # combinations = [(color, size) for color in colors for size in sizes]\n    # \n    # return {\n    #     'matrix': matrix,\n    #     'flattened': flattened,\n    #     'evens_only': evens_only,\n    #     'combinations': combinations\n    # }\n    pass\n\ndef multiple_iterables():\n    \"\"\"Combine multiple iterables with zip.\n    \n    Returns:\n        Dict with combined results.\n    \"\"\"\n    # TODO: Multiple iterables\n    # names = [\"Alice\", \"Bob\", \"Charlie\"]\n    # ages = [25, 30, 35]\n    # cities = [\"NYC\", \"LA\", \"SF\"]\n    # \n    # # Create tuples\n    # people = [(name, age) for name, age in zip(names, ages)]\n    # \n    # # Create formatted strings\n    # descriptions = [f\"{name} is {age} years old\" \n    #                 for name, age in zip(names, ages)]\n    # \n    # # Create dicts\n    # person_dicts = [{\"name\": n, \"age\": a, \"city\": c} \n    #                 for n, a, c in zip(names, ages, cities)]\n    # \n    # # Sum pairs\n    # list1 = [1, 2, 3]\n    # list2 = [10, 20, 30]\n    # sums = [x + y for x, y in zip(list1, list2)]\n    # \n    # return {\n    #     'people': people,\n    #     'descriptions': descriptions,\n    #     'person_dicts': person_dicts,\n    #     'sums': sums\n    # }\n    pass\n\ndef comprehension_vs_loop():\n    \"\"\"Compare comprehension vs traditional loop.\n    \n    Returns:\n        Dict showing both approaches produce same result.\n    \"\"\"\n    # TODO: Compare approaches\n    # # Traditional loop\n    # squares_loop = []\n    # for x in range(5):\n    #     squares_loop.append(x**2)\n    # \n    # # Comprehension\n    # squares_comp = [x**2 for x in range(5)]\n    # \n    # # Both produce same result\n    # same_result = squares_loop == squares_comp\n    # \n    # # Comprehension benefits\n    # benefits = {\n    #     'concise': 'One line vs multiple',\n    #     'readable': 'Clear intent',\n    #     'faster': 'Optimized internally',\n    #     'pythonic': 'Idiomatic Python'\n    # }\n    # \n    # return {\n    #     'loop_result': squares_loop,\n    #     'comp_result': squares_comp,\n    #     'same': same_result,\n    #     'benefits': benefits\n    # }\n    pass\n\n# Test code\nprint(\"List Comprehensions:\")\nprint(\"=\"*60)\n\nprint(\"\\nBasic Comprehensions:\")\nprint(\"-\"*60)\nbasic = basic_comprehensions()\nfor name, lst in basic.items():\n    print(f\"{name}: {lst}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Filtered Comprehensions:\")\nprint(\"=\"*60)\nfiltered = filtered_comprehensions()\nfor name, lst in filtered.items():\n    print(f\"{name}: {lst}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"If-Else Comprehensions:\")\nprint(\"=\"*60)\nifelse = ifelse_comprehensions()\nfor name, lst in ifelse.items():\n    print(f\"{name}: {lst}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Nested Comprehensions:\")\nprint(\"=\"*60)\nnested = nested_comprehensions()\nfor name, value in nested.items():\n    if name == 'matrix':\n        print(f\"{name}:\")\n        for row in value:\n            print(f\"  {row}\")\n    else:\n        print(f\"{name}: {value}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Multiple Iterables:\")\nprint(\"=\"*60)\nmultiple = multiple_iterables()\nfor name, value in multiple.items():\n    print(f\"{name}: {value}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Comprehension vs Loop:\")\nprint(\"=\"*60)\ncomparison = comprehension_vs_loop()\nprint(f\"Loop result: {comparison['loop_result']}\")\nprint(f\"Comp result: {comparison['comp_result']}\")\nprint(f\"Same result: {comparison['same']}\")\nprint(\"\\nBenefits of comprehensions:\")\nfor benefit, desc in comparison['benefits'].items():\n    print(f\"  {benefit}: {desc}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Key Concepts:\")\nprint(\"=\"*60)\nprint(\"Basic: [expr for item in iterable]\")\nprint(\"Filter: [expr for item in iterable if condition]\")\nprint(\"If-else: [expr1 if cond else expr2 for item in iterable]\")\nprint(\"Nested: [expr for item1 in iter1 for item2 in iter2]\")\nprint(\"Flatten: [x for sublist in nested for x in sublist]\")\nprint(\"\\nWhen to use:\")\nprint(\"  ✅ Simple transformations\")\nprint(\"  ✅ Filtering based on conditions\")\nprint(\"  ✅ One or two lines max\")\nprint(\"  ❌ Complex logic (use loop)\")\nprint(\"  ❌ Multiple statements needed\")",
  "solution": "def basic_comprehensions():\n    squares = [x**2 for x in range(5)]\n    doubled = [x * 2 for x in [1, 2, 3, 4, 5]]\n    upper = [s.upper() for s in [\"hello\", \"world\"]]\n    lengths = [len(word) for word in [\"hi\", \"hello\", \"hey\"]]\n    first_chars = [name[0] for name in [\"Alice\", \"Bob\", \"Charlie\"]]\n    from_range = [x for x in range(10, 15)]\n    \n    return {\n        'squares': squares,\n        'doubled': doubled,\n        'upper': upper,\n        'lengths': lengths,\n        'first_chars': first_chars,\n        'from_range': from_range\n    }\n\ndef filtered_comprehensions():\n    numbers = list(range(20))\n    evens = [x for x in numbers if x % 2 == 0]\n    odds = [x for x in numbers if x % 2 != 0]\n    greater_than_10 = [x for x in numbers if x > 10]\n    \n    words = [\"hi\", \"hello\", \"world\", \"python\", \"code\"]\n    long_words = [w for w in words if len(w) > 4]\n    starts_with_h = [w for w in words if w.startswith('h')]\n    \n    even_squares = [x**2 for x in range(10) if x % 2 == 0]\n    \n    return {\n        'evens': evens,\n        'odds': odds,\n        'greater_than_10': greater_than_10,\n        'long_words': long_words,\n        'starts_with_h': starts_with_h,\n        'even_squares': even_squares\n    }\n\ndef ifelse_comprehensions():\n    numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n    labels = [\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n    \n    values = [-2, -1, 0, 1, 2]\n    absolute = [x if x >= 0 else -x for x in values]\n    \n    scores = [85, 105, 92, 110, 78]\n    capped = [s if s <= 100 else 100 for s in scores]\n    \n    grades = [85, 92, 58, 73, 45, 90]\n    results = [\"Pass\" if g >= 60 else \"Fail\" for g in grades]\n    \n    return {\n        'labels': labels,\n        'absolute': absolute,\n        'capped': capped,\n        'results': results\n    }\n\ndef nested_comprehensions():\n    matrix = [[i * j for j in range(3)] for i in range(3)]\n    \n    nested = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n    flattened = [num for row in nested for num in row]\n    \n    evens_only = [num for row in nested for num in row if num % 2 == 0]\n    \n    colors = [\"red\", \"blue\"]\n    sizes = [\"S\", \"M\", \"L\"]\n    combinations = [(color, size) for color in colors for size in sizes]\n    \n    return {\n        'matrix': matrix,\n        'flattened': flattened,\n        'evens_only': evens_only,\n        'combinations': combinations\n    }\n\ndef multiple_iterables():\n    names = [\"Alice\", \"Bob\", \"Charlie\"]\n    ages = [25, 30, 35]\n    cities = [\"NYC\", \"LA\", \"SF\"]\n    \n    people = [(name, age) for name, age in zip(names, ages)]\n    \n    descriptions = [f\"{name} is {age} years old\" \n                    for name, age in zip(names, ages)]\n    \n    person_dicts = [{\"name\": n, \"age\": a, \"city\": c} \n                    for n, a, c in zip(names, ages, cities)]\n    \n    list1 = [1, 2, 3]\n    list2 = [10, 20, 30]\n    sums = [x + y for x, y in zip(list1, list2)]\n    \n    return {\n        'people': people,\n        'descriptions': descriptions,\n        'person_dicts': person_dicts,\n        'sums': sums\n    }\n\ndef comprehension_vs_loop():\n    squares_loop = []\n    for x in range(5):\n        squares_loop.append(x**2)\n    \n    squares_comp = [x**2 for x in range(5)]\n    \n    same_result = squares_loop == squares_comp\n    \n    benefits = {\n        'concise': 'One line vs multiple',\n        'readable': 'Clear intent',\n        'faster': 'Optimized internally',\n        'pythonic': 'Idiomatic Python'\n    }\n    \n    return {\n        'loop_result': squares_loop,\n        'comp_result': squares_comp,\n        'same': same_result,\n        'benefits': benefits\n    }",
  "hints": [
    "Basic: [expression for item in iterable]",
    "Filter: [expr for item in iterable if condition]",
    "If-else: [expr1 if cond else expr2 for item in iterable]",
    "Nested: Outer loop first, inner loop second",
    "Flatten: [x for sublist in nested for x in sublist]",
    "Use zip() to combine multiple lists"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Basic squares",
      "input": "basic_comprehensions()['squares']",
      "expectedOutput": "[0, 1, 4, 9, 16]",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Filter evens",
      "input": "filtered_comprehensions()['evens']",
      "expectedOutput": "[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "If-else labels",
      "input": "ifelse_comprehensions()['labels'][:3]",
      "expectedOutput": "['odd', 'even', 'odd']",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Flatten nested",
      "input": "nested_comprehensions()['flattened']",
      "expectedOutput": "[1, 2, 3, 4, 5, 6, 7, 8, 9]",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Zip sums",
      "input": "multiple_iterables()['sums']",
      "expectedOutput": "[11, 22, 33]",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Same result",
      "input": "comprehension_vs_loop()['same']",
      "expectedOutput": "True",
      "isHidden": true
    }
  ]
}