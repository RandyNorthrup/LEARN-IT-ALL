{
  "id": "exercise-038-namespace-resolution",
  "lessonId": "lesson-024-namespace-resolution",
  "title": "Namespaces and LEGB Resolution",
  "description": "Master Python namespaces and scope resolution order. Understand how Python finds variables using LEGB.\n\nYour program should:\n1. Understand namespaces (mappings of names to objects)\n2. Apply LEGB rule: Local → Enclosing → Global → Built-in\n3. Use globals() and locals() to inspect namespaces\n4. Understand variable shadowing across scopes\n5. Access built-in namespace functions\n6. Predict scope resolution order\n\nImplement these functions:\n- `show_local_namespace()`: Return locals() dictionary\n- `demonstrate_legb()`: Show all four LEGB scopes\n- `shadow_example(x)`: Demonstrate variable shadowing\n- `access_builtin()`: Use built-in function len()\n- `namespace_inspector()`: Inspect and return namespace info\n- `scope_chain()`: Show nested scope chain\n\nExample:\n```python\nshow_local_namespace()  # {'param': value, 'local_var': ...}\n```",
  "difficulty": "intermediate",
  "points": 20,
  "language": "python",
  "starterCode": "# Global variable\nglobal_x = \"Global\"\n\ndef show_local_namespace(param1, param2):\n    \"\"\"Show local namespace with locals().\n    \n    Args:\n        param1: First parameter.\n        param2: Second parameter.\n    \n    Returns:\n        Dictionary of local variables.\n    \"\"\"\n    # TODO: Create local variable and return locals()\n    # local_var = \"Local value\"\n    # return locals()  # Returns {'param1': ..., 'param2': ..., 'local_var': ...}\n    \n    pass\n\ndef demonstrate_legb():\n    \"\"\"Demonstrate all four LEGB scopes.\n    \n    Returns:\n        Dictionary with variables from each scope.\n    \"\"\"\n    # TODO: Show Local, Enclosing, Global, Built-in\n    # enclosing_var = \"Enclosing\"\n    # \n    # def inner():\n    #     local_var = \"Local\"\n    #     return {\n    #         'local': local_var,           # L - Local\n    #         'enclosing': enclosing_var,   # E - Enclosing\n    #         'global': global_x,           # G - Global\n    #         'builtin': len([1, 2, 3])     # B - Built-in (len function)\n    #     }\n    # \n    # return inner()\n    \n    pass\n\ndef shadow_example(x):\n    \"\"\"Demonstrate variable shadowing.\n    \n    Args:\n        x: Parameter value.\n    \n    Returns:\n        Dictionary showing shadowing.\n    \"\"\"\n    # TODO: Shadow parameter and global\n    # result = {'param': x}  # Original parameter\n    # \n    # x = \"Shadowed local\"  # Shadow parameter\n    # result['shadowed'] = x\n    # \n    # # global_x is shadowed by local\n    # global_x = \"Local shadow of global\"\n    # result['global_shadowed'] = global_x\n    # \n    # return result\n    \n    pass\n\ndef access_builtin():\n    \"\"\"Access built-in namespace.\n    \n    Returns:\n        Dictionary with built-in function results.\n    \"\"\"\n    # TODO: Use built-in functions (no import needed)\n    # data = [1, 2, 3, 4, 5]\n    # return {\n    #     'len': len(data),\n    #     'max': max(data),\n    #     'sum': sum(data),\n    #     'type': type(data).__name__\n    # }\n    \n    pass\n\ndef namespace_inspector():\n    \"\"\"Inspect namespace information.\n    \n    Returns:\n        Dictionary with namespace info.\n    \"\"\"\n    # TODO: Show local and global namespace counts\n    # local_var = 42\n    # another_var = \"test\"\n    # \n    # return {\n    #     'local_count': len(locals()),\n    #     'has_local_var': 'local_var' in locals(),\n    #     'has_global_x': 'global_x' in globals()\n    # }\n    \n    pass\n\ndef scope_chain():\n    \"\"\"Show nested scope chain.\n    \n    Returns:\n        String showing scope resolution.\n    \"\"\"\n    # TODO: Create nested scopes\n    # outer_var = \"Outer\"\n    # \n    # def middle():\n    #     middle_var = \"Middle\"\n    #     \n    #     def inner():\n    #         inner_var = \"Inner\"\n    #         # Access all three levels\n    #         return f\"{inner_var} -> {middle_var} -> {outer_var}\"\n    #     \n    #     return inner()\n    # \n    # return middle()\n    \n    pass\n\n# Test functions\nprint(\"Local Namespace:\")\nprint(\"=\"*60)\nlocals_dict = show_local_namespace(\"value1\", \"value2\")\nprint(f\"Local variables: {list(locals_dict.keys())}\")\nprint(f\"param1: {locals_dict.get('param1')}\")\nprint(f\"param2: {locals_dict.get('param2')}\")\nprint(f\"local_var: {locals_dict.get('local_var')}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"LEGB Rule Demonstration:\")\nprint(\"=\"*60)\nlegb = demonstrate_legb()\nprint(f\"L (Local):     {legb['local']}\")\nprint(f\"E (Enclosing): {legb['enclosing']}\")\nprint(f\"G (Global):    {legb['global']}\")\nprint(f\"B (Built-in):  {legb['builtin']}\")\nprint(\"\\nPython searches in this order: L → E → G → B\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Variable Shadowing:\")\nprint(\"=\"*60)\nprint(f\"Global global_x: {global_x}\")\nshadow_result = shadow_example(\"Original param\")\nprint(f\"Original param: {shadow_result['param']}\")\nprint(f\"Shadowed param: {shadow_result['shadowed']}\")\nprint(f\"Global shadowed: {shadow_result['global_shadowed']}\")\nprint(f\"Global unchanged: {global_x}\")\nprint(\"Local variables shadow outer scopes\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Built-in Namespace:\")\nprint(\"=\"*60)\nbuiltins = access_builtin()\nprint(f\"len([1,2,3,4,5]): {builtins['len']}\")\nprint(f\"max([1,2,3,4,5]): {builtins['max']}\")\nprint(f\"sum([1,2,3,4,5]): {builtins['sum']}\")\nprint(f\"type([...]): {builtins['type']}\")\nprint(\"Built-ins always available (no import needed)\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Namespace Inspector:\")\nprint(\"=\"*60)\ninspect = namespace_inspector()\nprint(f\"Local variables count: {inspect['local_count']}\")\nprint(f\"Has 'local_var': {inspect['has_local_var']}\")\nprint(f\"Has 'global_x' in globals: {inspect['has_global_x']}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Nested Scope Chain:\")\nprint(\"=\"*60)\nchain = scope_chain()\nprint(f\"Scope resolution: {chain}\")\nprint(\"Inner function accessed all enclosing scopes\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Key Concepts:\")\nprint(\"=\"*60)\nprint(\"1. Namespace: Mapping of names to objects\")\nprint(\"2. LEGB: Local → Enclosing → Global → Built-in\")\nprint(\"3. locals(): Dict of local namespace\")\nprint(\"4. globals(): Dict of global namespace\")\nprint(\"5. Shadowing: Inner scope hides outer scope\")\nprint(\"6. Built-ins: Always available (len, max, sum, etc.)\")\nprint(\"\\nScope Resolution:\")\nprint(\"  Python searches L → E → G → B until found\")\nprint(\"  First match wins\")\nprint(\"  NameError if not found in any scope\")",
  "solution": "# Global variable\nglobal_x = \"Global\"\n\ndef show_local_namespace(param1, param2):\n    \"\"\"Show local namespace with locals().\"\"\"\n    local_var = \"Local value\"\n    return locals()\n\ndef demonstrate_legb():\n    \"\"\"Demonstrate all four LEGB scopes.\"\"\"\n    enclosing_var = \"Enclosing\"\n    \n    def inner():\n        local_var = \"Local\"\n        return {\n            'local': local_var,\n            'enclosing': enclosing_var,\n            'global': global_x,\n            'builtin': len([1, 2, 3])\n        }\n    \n    return inner()\n\ndef shadow_example(x):\n    \"\"\"Demonstrate variable shadowing.\"\"\"\n    result = {'param': x}\n    \n    x = \"Shadowed local\"\n    result['shadowed'] = x\n    \n    global_x = \"Local shadow of global\"\n    result['global_shadowed'] = global_x\n    \n    return result\n\ndef access_builtin():\n    \"\"\"Access built-in namespace.\"\"\"\n    data = [1, 2, 3, 4, 5]\n    return {\n        'len': len(data),\n        'max': max(data),\n        'sum': sum(data),\n        'type': type(data).__name__\n    }\n\ndef namespace_inspector():\n    \"\"\"Inspect namespace information.\"\"\"\n    local_var = 42\n    another_var = \"test\"\n    \n    return {\n        'local_count': len(locals()),\n        'has_local_var': 'local_var' in locals(),\n        'has_global_x': 'global_x' in globals()\n    }\n\ndef scope_chain():\n    \"\"\"Show nested scope chain.\"\"\"\n    outer_var = \"Outer\"\n    \n    def middle():\n        middle_var = \"Middle\"\n        \n        def inner():\n            inner_var = \"Inner\"\n            return f\"{inner_var} -> {middle_var} -> {outer_var}\"\n        \n        return inner()\n    \n    return middle()\n\n# Test code as provided",
  "hints": [
    "LEGB: Local, Enclosing, Global, Built-in - search order",
    "locals() returns dictionary of current function's local variables",
    "globals() returns dictionary of module-level variables",
    "Built-in functions (len, max, sum) always available",
    "Shadowing: Inner scope variable hides outer scope same name",
    "First match wins in LEGB search"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Local namespace inspection",
      "input": "'local_var' in show_local_namespace('a', 'b')",
      "expectedOutput": "True",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "LEGB demonstration",
      "input": "demonstrate_legb()['builtin']",
      "expectedOutput": "3",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Variable shadowing",
      "input": "shadow_example('test')['shadowed']",
      "expectedOutput": "'Shadowed local'",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Built-in access",
      "input": "access_builtin()['sum']",
      "expectedOutput": "15",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Namespace inspector",
      "input": "namespace_inspector()['has_global_x']",
      "expectedOutput": "True",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Scope chain",
      "input": "'Inner -> Middle -> Outer' in scope_chain()",
      "expectedOutput": "True",
      "isHidden": true
    }
  ]
}