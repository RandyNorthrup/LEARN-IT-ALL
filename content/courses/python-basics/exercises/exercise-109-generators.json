{
  "id": "exercise-109-generators",
  "lessonId": "lesson-099-generators",
  "title": "Lazy Evaluation with Generators",
  "description": "Master generators for memory-efficient iteration. Learn yield statement and generator expressions.\n\nYour program should:\n1. Create generators with yield\n2. Use generator expressions\n3. Build infinite sequences\n4. Chain generators together\n5. Understand lazy evaluation benefits\n\nImplement these functions:\n- `count_up_to(n)`: Generator yielding 1 to n\n- `fibonacci_gen(n)`: Generate first n Fibonacci numbers\n- `squares_gen(start, stop)`: Generator of squares in range\n- `filter_even_gen(numbers)`: Generator filtering evens\n- `infinite_counter(start)`: Infinite counter from start\n- `take_while_less_than(gen, limit)`: Take while < limit\n\nExample:\n```python\nfor n in count_up_to(5): print(n)  # 1, 2, 3, 4, 5\n```",
  "difficulty": "advanced",
  "points": 25,
  "language": "python",
  "starterCode": "def count_up_to(n):\n    \"\"\"Generator yielding 1 to n.\"\"\"\n    # TODO: Use yield instead of return\n    # i = 1\n    # while i <= n:\n    #   yield i\n    #   i += 1\n    \n    pass\n\ndef fibonacci_gen(n):\n    \"\"\"Generate first n Fibonacci numbers.\"\"\"\n    # TODO: Yield Fibonacci sequence\n    # a, b = 0, 1\n    # for _ in range(n):\n    #   yield a\n    #   a, b = b, a + b\n    \n    pass\n\ndef squares_gen(start, stop):\n    \"\"\"Generate squares from start² to (stop-1)².\"\"\"\n    # TODO: Yield squares\n    # for i in range(start, stop):\n    #   yield i ** 2\n    \n    pass\n\ndef filter_even_gen(numbers):\n    \"\"\"Generator that yields only even numbers.\"\"\"\n    # TODO: Filter and yield evens\n    # for num in numbers:\n    #   if num % 2 == 0:\n    #     yield num\n    \n    pass\n\ndef infinite_counter(start=0):\n    \"\"\"Infinite counter starting from start.\"\"\"\n    # TODO: Yield infinitely\n    # current = start\n    # while True:\n    #   yield current\n    #   current += 1\n    \n    pass\n\ndef take_while_less_than(gen, limit):\n    \"\"\"Take from generator while values < limit.\"\"\"\n    # TODO: Consume generator conditionally\n    # result = []\n    # for value in gen:\n    #   if value < limit:\n    #     result.append(value)\n    #   else:\n    #     break\n    # return result\n    \n    pass\n\n# Test functions\nprint(\"Count Up To:\")\nprint(\"=\"*60)\nfor n in [5, 3, 10]:\n    gen = count_up_to(n)\n    result = list(gen)\n    print(f\"count_up_to({n}): {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Fibonacci Generator:\")\nprint(\"=\"*60)\nfor n in [5, 10, 7]:\n    fib = fibonacci_gen(n)\n    result = list(fib)\n    print(f\"First {n} Fibonacci: {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Squares Generator:\")\nprint(\"=\"*60)\ntest_ranges = [(1, 6), (5, 11), (0, 5)]\n\nfor start, stop in test_ranges:\n    squares = squares_gen(start, stop)\n    result = list(squares)\n    print(f\"Squares from {start}² to {stop-1}²: {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Filter Even Generator:\")\nprint(\"=\"*60)\ntest_lists = [\n    [1, 2, 3, 4, 5, 6],\n    [1, 3, 5, 7, 9],\n    [2, 4, 6, 8, 10],\n]\n\nfor numbers in test_lists:\n    evens_gen = filter_even_gen(numbers)\n    evens = list(evens_gen)\n    print(f\"From {numbers}: {evens}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Infinite Counter (limited display):\")\nprint(\"=\"*60)\ncounter = infinite_counter(10)\nprint(\"First 10 values from infinite_counter(10):\")\nfor i, value in enumerate(counter):\n    if i >= 10:\n        break\n    print(value, end=\" \")\nprint(\"\\n\")\n\ncounter2 = infinite_counter()\nprint(\"First 5 values from infinite_counter(0):\")\nfor i, value in enumerate(counter2):\n    if i >= 5:\n        break\n    print(value, end=\" \")\nprint(\"\\n\")\n\nprint(\"=\"*60)\nprint(\"Take While Less Than:\")\nprint(\"=\"*60)\nsquares = squares_gen(1, 20)\nresult = take_while_less_than(squares, 100)\nprint(f\"Squares less than 100: {result}\")\n\ncounter = count_up_to(100)\nresult = take_while_less_than(counter, 10)\nprint(f\"Numbers less than 10: {result}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Memory Efficiency Demo:\")\nprint(\"=\"*60)\nprint(\"Generator expression vs List comprehension:\\n\")\n\nimport sys\n\n# List comprehension (stores all values)\nlist_comp = [x**2 for x in range(10000)]\nlist_size = sys.getsizeof(list_comp)\n\n# Generator expression (lazy, stores almost nothing)\ngen_expr = (x**2 for x in range(10000))\ngen_size = sys.getsizeof(gen_expr)\n\nprint(f\"List comprehension size: {list_size:,} bytes\")\nprint(f\"Generator expression size: {gen_size} bytes\")\nprint(f\"Memory saved: {list_size - gen_size:,} bytes\")\nprint(f\"Generator is {list_size // gen_size:.0f}x more memory efficient!\")",
  "solution": "def count_up_to(n):\n    \"\"\"Generator yielding 1 to n.\"\"\"\n    i = 1\n    while i <= n:\n        yield i\n        i += 1\n\ndef fibonacci_gen(n):\n    \"\"\"Generate first n Fibonacci numbers.\"\"\"\n    a, b = 0, 1\n    for _ in range(n):\n        yield a\n        a, b = b, a + b\n\ndef squares_gen(start, stop):\n    \"\"\"Generate squares from start² to (stop-1)².\"\"\"\n    for i in range(start, stop):\n        yield i ** 2\n\ndef filter_even_gen(numbers):\n    \"\"\"Generator that yields only even numbers.\"\"\"\n    for num in numbers:\n        if num % 2 == 0:\n            yield num\n\ndef infinite_counter(start=0):\n    \"\"\"Infinite counter starting from start.\"\"\"\n    current = start\n    while True:\n        yield current\n        current += 1\n\ndef take_while_less_than(gen, limit):\n    \"\"\"Take from generator while values < limit.\"\"\"\n    result = []\n    for value in gen:\n        if value < limit:\n            result.append(value)\n        else:\n            break\n    return result\n\n# Test code as provided",
  "hints": [
    "Use yield instead of return to create generator",
    "Generators are lazy: values computed on-demand",
    "Generator expression: (expr for item in iterable)",
    "Can't reuse generators (like iterators)",
    "Use list(generator) to consume all values",
    "Infinite generators: while True: yield value"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Count up to 5",
      "input": "list(count_up_to(5))",
      "expectedOutput": "[1, 2, 3, 4, 5]",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "First 5 Fibonacci numbers",
      "input": "list(fibonacci_gen(5))",
      "expectedOutput": "[0, 1, 1, 2, 3]",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Squares generator",
      "input": "list(squares_gen(1, 4))",
      "expectedOutput": "[1, 4, 9]",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Filter even numbers",
      "input": "list(filter_even_gen([1, 2, 3, 4, 5]))",
      "expectedOutput": "[2, 4]",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Infinite counter limited",
      "input": "[next(infinite_counter(10)) for _ in range(3)]",
      "expectedOutput": "[10, 11, 12]",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Take while less than limit",
      "input": "take_while_less_than(count_up_to(10), 5)",
      "expectedOutput": "[1, 2, 3, 4]",
      "isHidden": true
    }
  ]
}