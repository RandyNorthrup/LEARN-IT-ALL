{
  "id": "exercise-068-higher-order-functions",
  "lessonId": "lesson-054-higher-order-functions",
  "title": "Higher-Order Functions and Functional Programming",
  "description": "Master higher-order functions: pass functions as arguments, return functions, and use map/filter/reduce.\n\nYour program should:\n1. Pass functions as arguments\n2. Return functions from functions\n3. Use map() to transform sequences\n4. Use filter() to select elements\n5. Use reduce() to aggregate values\n6. Create function decorators\n\nImplement these functions:\n- `apply_operation(x, y, operation)`: Apply operation function\n- `create_multiplier(n)`: Return function that multiplies by n\n- `transform_list(items, transformer)`: Map transformer over items\n- `filter_list(items, predicate)`: Filter items by predicate\n- `reduce_list(items, reducer, initial)`: Reduce items with reducer\n- `compose(f, g)`: Return composed function f(g(x))\n\nExample:\n```python\ndouble = create_multiplier(2)\ndouble(5)  # 10\n```",
  "difficulty": "advanced",
  "points": 25,
  "language": "python",
  "starterCode": "def apply_operation(x, y, operation):\n    \"\"\"Apply operation function to x and y.\n    \n    Args:\n        x: First value.\n        y: Second value.\n        operation: Function that takes two arguments.\n    \n    Returns:\n        Result of operation(x, y).\n    \"\"\"\n    # TODO: Call operation with x and y\n    # return operation(x, y)\n    \n    pass\n\ndef create_multiplier(n):\n    \"\"\"Create and return a function that multiplies by n.\n    \n    Args:\n        n: Number to multiply by.\n    \n    Returns:\n        Function that multiplies its argument by n.\n    \"\"\"\n    # TODO: Return a function that multiplies by n\n    # def multiplier(x):\n    #     return x * n\n    # return multiplier\n    \n    pass\n\ndef transform_list(items, transformer):\n    \"\"\"Transform each item using transformer function.\n    \n    Args:\n        items: List of items to transform.\n        transformer: Function to apply to each item.\n    \n    Returns:\n        List of transformed items.\n    \"\"\"\n    # TODO: Use list comprehension or map\n    # return [transformer(item) for item in items]\n    # OR: return list(map(transformer, items))\n    \n    pass\n\ndef filter_list(items, predicate):\n    \"\"\"Filter items based on predicate function.\n    \n    Args:\n        items: List of items to filter.\n        predicate: Function that returns True/False for each item.\n    \n    Returns:\n        List of items where predicate returned True.\n    \"\"\"\n    # TODO: Use list comprehension or filter\n    # return [item for item in items if predicate(item)]\n    # OR: return list(filter(predicate, items))\n    \n    pass\n\ndef reduce_list(items, reducer, initial):\n    \"\"\"Reduce list to single value using reducer function.\n    \n    Args:\n        items: List of items to reduce.\n        reducer: Function(accumulator, item) -> new_accumulator.\n        initial: Initial accumulator value.\n    \n    Returns:\n        Final accumulated value.\n    \"\"\"\n    # TODO: Manually implement reduce\n    # accumulator = initial\n    # for item in items:\n    #     accumulator = reducer(accumulator, item)\n    # return accumulator\n    \n    pass\n\ndef compose(f, g):\n    \"\"\"Compose two functions: returns f(g(x)).\n    \n    Args:\n        f: Outer function.\n        g: Inner function.\n    \n    Returns:\n        Composed function.\n    \"\"\"\n    # TODO: Return function that applies g then f\n    # def composed(x):\n    #     return f(g(x))\n    # return composed\n    \n    pass\n\n# Test functions\nprint(\"Apply Operation:\")\nprint(\"=\"*60)\ndef add(a, b):\n    return a + b\n\ndef multiply(a, b):\n    return a * b\n\ndef power(a, b):\n    return a ** b\n\nprint(f\"apply_operation(5, 3, add): {apply_operation(5, 3, add)}\")\nprint(f\"apply_operation(5, 3, multiply): {apply_operation(5, 3, multiply)}\")\nprint(f\"apply_operation(2, 3, power): {apply_operation(2, 3, power)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Create Multiplier (Return Function):\")\nprint(\"=\"*60)\ndouble = create_multiplier(2)\ntriple = create_multiplier(3)\ntimes_ten = create_multiplier(10)\n\nprint(f\"double = create_multiplier(2)\")\nprint(f\"  double(5): {double(5)}\")\nprint(f\"  double(10): {double(10)}\")\n\nprint(f\"\\ntriple = create_multiplier(3)\")\nprint(f\"  triple(5): {triple(5)}\")\nprint(f\"  triple(10): {triple(10)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Transform List (Map):\")\nprint(\"=\"*60)\nnumbers = [1, 2, 3, 4, 5]\n\ndef square(x):\n    return x ** 2\n\ndef double_func(x):\n    return x * 2\n\nprint(f\"Original: {numbers}\")\nprint(f\"Squared: {transform_list(numbers, square)}\")\nprint(f\"Doubled: {transform_list(numbers, double_func)}\")\n\nwords = [\"hello\", \"world\", \"python\"]\nprint(f\"\\nWords: {words}\")\nprint(f\"Uppercase: {transform_list(words, str.upper)}\")\nprint(f\"Lengths: {transform_list(words, len)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Filter List (Filter):\")\nprint(\"=\"*60)\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\ndef is_even(x):\n    return x % 2 == 0\n\ndef is_greater_than_five(x):\n    return x > 5\n\nprint(f\"Numbers: {numbers}\")\nprint(f\"Even numbers: {filter_list(numbers, is_even)}\")\nprint(f\"Greater than 5: {filter_list(numbers, is_greater_than_five)}\")\n\nwords = [\"apple\", \"banana\", \"cherry\", \"date\", \"elderberry\"]\nprint(f\"\\nWords: {words}\")\nprint(f\"Length > 5: {filter_list(words, lambda w: len(w) > 5)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Reduce List (Aggregate):\")\nprint(\"=\"*60)\nnumbers = [1, 2, 3, 4, 5]\n\ndef add_reducer(acc, x):\n    return acc + x\n\ndef multiply_reducer(acc, x):\n    return acc * x\n\ndef max_reducer(acc, x):\n    return x if x > acc else acc\n\nprint(f\"Numbers: {numbers}\")\nprint(f\"Sum: {reduce_list(numbers, add_reducer, 0)}\")\nprint(f\"Product: {reduce_list(numbers, multiply_reducer, 1)}\")\nprint(f\"Max: {reduce_list(numbers, max_reducer, numbers[0])}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Compose Functions:\")\nprint(\"=\"*60)\ndef add_one(x):\n    return x + 1\n\ndef square_func(x):\n    return x ** 2\n\n# Compose: square then add_one\nsquare_then_add = compose(add_one, square_func)\nprint(f\"square_then_add = compose(add_one, square)\")\nprint(f\"  Input: 3\")\nprint(f\"  square(3) = 9\")\nprint(f\"  add_one(9) = 10\")\nprint(f\"  Result: {square_then_add(3)}\")\n\n# Compose: add_one then square\nadd_then_square = compose(square_func, add_one)\nprint(f\"\\nadd_then_square = compose(square, add_one)\")\nprint(f\"  Input: 3\")\nprint(f\"  add_one(3) = 4\")\nprint(f\"  square(4) = 16\")\nprint(f\"  Result: {add_then_square(3)}\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"Higher-Order Functions Summary:\")\nprint(\"=\"*60)\nprint(\"1. Functions as arguments: pass behavior to functions\")\nprint(\"2. Functions as return values: create specialized functions\")\nprint(\"3. map(): transform each element\")\nprint(\"4. filter(): select elements matching condition\")\nprint(\"5. reduce(): aggregate to single value\")\nprint(\"6. compose(): combine functions f(g(x))\")\nprint(\"\\nFunctions are first-class citizens in Python!\")",
  "solution": "def apply_operation(x, y, operation):\n    \"\"\"Apply operation function to x and y.\n    \n    Args:\n        x: First value.\n        y: Second value.\n        operation: Function that takes two arguments.\n    \n    Returns:\n        Result of operation(x, y).\n    \"\"\"\n    return operation(x, y)\n\ndef create_multiplier(n):\n    \"\"\"Create and return a function that multiplies by n.\n    \n    Args:\n        n: Number to multiply by.\n    \n    Returns:\n        Function that multiplies its argument by n.\n    \"\"\"\n    def multiplier(x):\n        return x * n\n    return multiplier\n\ndef transform_list(items, transformer):\n    \"\"\"Transform each item using transformer function.\n    \n    Args:\n        items: List of items to transform.\n        transformer: Function to apply to each item.\n    \n    Returns:\n        List of transformed items.\n    \"\"\"\n    return [transformer(item) for item in items]\n\ndef filter_list(items, predicate):\n    \"\"\"Filter items based on predicate function.\n    \n    Args:\n        items: List of items to filter.\n        predicate: Function that returns True/False for each item.\n    \n    Returns:\n        List of items where predicate returned True.\n    \"\"\"\n    return [item for item in items if predicate(item)]\n\ndef reduce_list(items, reducer, initial):\n    \"\"\"Reduce list to single value using reducer function.\n    \n    Args:\n        items: List of items to reduce.\n        reducer: Function(accumulator, item) -> new_accumulator.\n        initial: Initial accumulator value.\n    \n    Returns:\n        Final accumulated value.\n    \"\"\"\n    accumulator = initial\n    for item in items:\n        accumulator = reducer(accumulator, item)\n    return accumulator\n\ndef compose(f, g):\n    \"\"\"Compose two functions: returns f(g(x)).\n    \n    Args:\n        f: Outer function.\n        g: Inner function.\n    \n    Returns:\n        Composed function.\n    \"\"\"\n    def composed(x):\n        return f(g(x))\n    return composed\n\n# Test code as provided",
  "hints": [
    "Higher-order function: takes or returns functions",
    "apply_operation: just call operation(x, y)",
    "create_multiplier: return nested function (closure)",
    "Use list comprehension: [f(x) for x in items]",
    "Filter: [x for x in items if predicate(x)]",
    "Reduce: loop through items, update accumulator"
  ],
  "testCases": [
    {
      "id": "tc1",
      "description": "Apply operation with add",
      "input": "apply_operation(5, 3, lambda a, b: a + b)",
      "expectedOutput": "8",
      "isHidden": false
    },
    {
      "id": "tc2",
      "description": "Create multiplier returns function",
      "input": "create_multiplier(3)(5)",
      "expectedOutput": "15",
      "isHidden": false
    },
    {
      "id": "tc3",
      "description": "Transform list with square",
      "input": "transform_list([1, 2, 3], lambda x: x**2)",
      "expectedOutput": "[1, 4, 9]",
      "isHidden": false
    },
    {
      "id": "tc4",
      "description": "Filter even numbers",
      "input": "filter_list([1, 2, 3, 4], lambda x: x % 2 == 0)",
      "expectedOutput": "[2, 4]",
      "isHidden": true
    },
    {
      "id": "tc5",
      "description": "Reduce to sum",
      "input": "reduce_list([1, 2, 3], lambda acc, x: acc + x, 0)",
      "expectedOutput": "6",
      "isHidden": true
    },
    {
      "id": "tc6",
      "description": "Compose functions",
      "input": "compose(lambda x: x + 1, lambda x: x * 2)(5)",
      "expectedOutput": "11",
      "isHidden": true
    }
  ]
}